(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"9Fh8":function(e,t,a){"use strict";var s=a("3Am6"),n=a("iOEq"),i=a("p8AH"),l=a("+Izv"),o=a("I83f"),r=a.n(o),c=(a("wd/R"),a("YfZs"),a("KN1T"),a("QvIH")),d={name:"verNovedad",props:{buscarReserva:{required:!0},idNovedad:{type:Number}},data:function(){return{datos:[]}},methods:{consultarNovedad:function(){var e=this;axios.post("/procesos/consultarNovedad",{idNovedad:this.idNovedad}).then((function(t){e.datos=t.data[0]}))}},watch:{buscarReserva:{immediate:!0,handler:function(e,t){"si"==this.buscarReserva&&""!=this.idNovedad&&null!=this.idNovedad&&this.consultarNovedad()}}}},u=a("KHd+"),v=Object(u.a)(d,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return Object.keys(e.datos).length>0?a("ValidationObserver",{ref:"form"},[a("form",[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col sm:w-12/12 md:w-6/12 lg:w-6/12 w-full mb-2"},[a("vs-input",{staticClass:"w-full",attrs:{label:"Novedad"},model:{value:e.datos.novedad,callback:function(t){e.$set(e.datos,"novedad",t)},expression:"datos.novedad"}})],1),e._v(" "),a("div",{staticClass:"vx-col sm:w-12/12 md:w-12/12 lg:w-12/12 w-full mb-2"},e._l(e.datos.gestor.split(","),(function(t){return a("vs-chip",[a("vs-avatar"),e._v("\n                    "+e._s(t)+"\n                ")],1)})),1)]),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col sm:w-12/12 md:w-6/12 lg:w-6/12 w-full mb-2"},[a("vs-input",{staticClass:"w-full",attrs:{label:"Fecha inicio"},model:{value:e.datos.fechaInicio,callback:function(t){e.$set(e.datos,"fechaInicio",t)},expression:"datos.fechaInicio"}})],1),e._v(" "),a("div",{staticClass:"vx-col sm:w-12/12 md:w-4/12 lg:w-4/12 w-full mb-2"},[a("vs-input",{staticClass:"w-full",attrs:{label:"Fecha fin"},model:{value:e.datos.fechaFin,callback:function(t){e.$set(e.datos,"fechaFin",t)},expression:"datos.fechaFin"}})],1),e._v(" "),a("div",{staticClass:"vx-col sm:w-12/12 md:w-2/12 lg:w-2/12 w-full mb-2"},[a("vs-input",{staticClass:"w-full",attrs:{label:"Horas"},model:{value:e.datos.horas,callback:function(t){e.$set(e.datos,"horas",t)},expression:"datos.horas"}})],1),e._v(" "),a("div",{staticClass:"vx-col sm:w-12/12 md:w-12/12 lg:w-12/12 w-full mb-2"},[a("vs-input",{staticClass:"w-full",attrs:{label:"Observación"},model:{value:e.datos.observacion,callback:function(t){e.$set(e.datos,"observacion",t)},expression:"datos.observacion"}})],1)])])]):e._e()}),[],!1,null,"0d842e80",null).exports,f={name:"fullCalendar",props:{titulo:"",eventos:{type:[Array,Object]}},components:{FullCalendar:s.a,ordenesGestionView:c.a,verNovedad:v},data:function(){return{fechaActual:new Date,opcion:"OT",fechaInicio:null,fechaFin:null,buscar:null,file:null,abrirPoput:!1,idReserva:null,idNovedad:null,calendarPlugins:[n.d,l.a,i.a],calendarWeekends:!0,calendarEvents:[],local:r.a,config:{editable:!1,defaultView:"month",selectable:!0,timeZone:"America/Bogota"},calendarView:"dayGridMonth",calendarViewTypes:[{label:"Mes",val:"dayGridMonth"},{label:"Semana",val:"timeGridWeek"},{label:"Día",val:"timeGridDay"},{label:"Agenda",val:"listWeek"}],tituloSiguiente:""}},computed:{windowWidth:function(){return this.$store.state.windowWidth}},methods:{updateMonth:function(e){var t=this.$refs.calendar.getApi();e>0?t.next():t.prev(),this.tituloSiguiente=t.view.view.title,this.$emit("actualizarEventos")},toggleWeekends:function(){this.calendarWeekends=!this.calendarWeekends},gotoPast:function(){this.$refs.fullCalendar.getApi().gotoDate(new Date)},handleDateClick:function(e){},infoEvento:function(e){if("OT"==e.event.extendedProps.tipo){this.opcion="OT",this.buscar="no";var t=e.event.id;this.idReserva=parseInt(t)}else this.opcion="RESERVA",this.buscar="si",this.fechaInicio=e.event.start,this.fechaFin=e.event.end,this.idNovedad=parseInt(e.event.id);this.abrirPoput=!0},actualizarVistas:function(e){this.$refs.calendar.getApi().changeView(e),this.calendarView=e,this.tituloSiguiente=this.$refs.calendar.getApi().view.view.title,this.$emit("actualizarEventos")},mostrarTooltip:function(e){}},mounted:function(){this.tituloSiguiente=this.$refs.calendar.getApi().view.view.title;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&this.$refs.calendar.getApi().changeView("listWeek"),console.log(new Date)},watch:{abrirPoput:function(e){e||(this.idReserva=null,this.buscar=null)}}},h=(a("ctrV"),Object(u.a)(f,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vs-card",[a("div",{staticClass:"vx-row no-gutter"},[a("div",{staticClass:"vx-col w-1/3 items-center sm:flex hidden"}),e._v(" "),a("div",{staticClass:"vx-col sm:w-1/3 w-full sm:my-0 my-3 flex sm:justify-end justify-center order-last"},[a("div",{staticClass:"flex items-center"},[a("feather-icon",{staticClass:"cursor-pointer bg-primary text-white rounded-full",attrs:{icon:e.$vs.rtl?"ChevronRightIcon":"ChevronLeftIcon",svgClasses:"w-5 h-5 m-1"},on:{click:function(t){return e.updateMonth(-1)}}}),e._v(" "),a("span",{staticClass:"mx-3 text-xl font-medium whitespace-no-wrap"},[e._v(e._s(e.tituloSiguiente))]),e._v(" "),a("feather-icon",{staticClass:"cursor-pointer bg-primary text-white rounded-full",attrs:{icon:e.$vs.rtl?"ChevronLeftIcon":"ChevronRightIcon",svgClasses:"w-5 h-5 m-1"},on:{click:function(t){return e.updateMonth(1)}}})],1)]),e._v(" "),a("div",{staticClass:"vx-col sm:w-1/3 w-full flex justify-center"},[e._l(e.calendarViewTypes,(function(t,s){return[e.calendarView===t.val?a("vs-button",{key:String(t.val)+"filled",staticClass:"p-3 md:px-8 md:py-3",class:{"border-l-0 rounded-l-none":s,"rounded-r-none":e.calendarViewTypes.length!==s+1},attrs:{type:"filled"},on:{click:function(a){return e.actualizarVistas(t.val)}}},[e._v(e._s(t.label)+"\n                ")]):a("vs-button",{key:String(t.val)+"border",staticClass:"p-3 md:px-8 md:py-3",class:{"border-l-0 rounded-l-none":s,"rounded-r-none":e.calendarViewTypes.length!==s+1},attrs:{type:"border"},on:{click:function(a){return e.actualizarVistas(t.val)}}},[e._v(e._s(t.label)+"\n                ")])]}))],2)]),e._v(" "),a("FullCalendar",{ref:"calendar",attrs:{locale:e.local,header:{left:"today",center:"",right:""},"time-zone":"America/Bogota",defaultView:"dayGridMonth",events:e.eventos,schedulerLicenseKey:"0199165136-fcs-1577368450",plugins:e.calendarPlugins,navLinks:!0,"week-numbers":"true","event-limit":"true","now-indicator":"true","event-render":e.mostrarTooltip,now:e.fechaActual},on:{dateClick:e.handleDateClick,eventClick:e.infoEvento}}),e._v(" "),a("vs-popup",{attrs:{fullscreen:"",classContent:"popup-example",title:"OT"==e.opcion?"Información orden de trabajo ":"Información de novedad",active:e.abrirPoput},on:{"update:active":function(t){e.abrirPoput=t}}},["OT"==e.opcion?a("div",[a("ordenes-gestion-view",{ref:"componente_gestionar_orden",attrs:{"id-reserva":e.idReserva}})],1):a("div",[a("ver-novedad",{ref:"componente_novedad",attrs:{buscarReserva:e.buscar,"id-novedad":e.idNovedad}})],1)])],1)}),[],!1,null,null,null));t.a=h.exports},HzdN:function(e,t,a){var s=a("ML8f");"string"==typeof s&&(s=[[e.i,s,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(s,n);s.locals&&(e.exports=s.locals)},ML8f:function(e,t,a){(t=e.exports=a("I1BE")(!1)).i(a("x2Gp"),""),t.i(a("9nTw"),""),t.i(a("dWpx"),""),t.i(a("nQO4"),""),t.push([e.i,"",""])},VNkW:function(e,t,a){"use strict";a.r(t);var s,n={name:"index",components:{FullCalendar:a("9Fh8").a},data:function(){return{datos:[],idSalon:null,selectSalones:[],leyendas:[],listaSalones:[]}},created:function(){this.idSalon=this.$route.query.idSalon,s=this,this.listarEventosSalon()},methods:{listarEventosSalon:function(){var e=this;axios.post("/procesos/listarEventosSalones",{idSalon:this.idSalon}).then((function(t){e.datos=t.data[0],e.leyendas=t.data[1],s=e,e.listaSalones=t.data[1],$.each(e.listaSalones,(function(e,t){s.selectSalones.push(t.id)}))}))},actualizarVista:function(){var e=[];$.each(s.listaSalones,(function(t,a){e.push(Object.assign({},a))}));var t=[];$.each(s.listaSalones,(function(e,a){-1===$.inArray(a.id,s.selectSalones)?t.push(a):$("."+a.id).show()})),$.each(t,(function(e,t){$("."+t.id).hide()}))}}},i=a("KHd+"),l=Object(i.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vs-row",[null!=e.idSalon?a("vs-card",{attrs:{title:"Leyendas"}},[a("vs-row",e._l(e.leyendas,(function(t,s){return a("vs-col",{key:s,staticClass:"mb-2",attrs:{"vs-sm":"12","vs-md":"2","vs-lg":"2"}},[a("div",{staticClass:"h-3 w-3 inline-block rounded-full mr-2",style:"background-color:"+t.color}),e._v(" "),a("span",[e._v(e._s(t.text))])])})),1)],1):e._e(),e._v(" "),null==e.idSalon?a("vs-card",{attrs:{title:"Leyendas"}},[a("vs-row",e._l(e.listaSalones,(function(t,s){return a("vs-col",{staticClass:"mb-2",attrs:{"vs-sm":"6","vs-md":"2","vs-lg":"2"}},[a("vs-checkbox",{key:s,attrs:{"vs-value":t.id,color:t.color},on:{input:e.actualizarVista},model:{value:e.selectSalones,callback:function(t){e.selectSalones=t},expression:"selectSalones"}},[e._v(e._s(t.text)+"\n                ")])],1)})),1)],1):e._e(),e._v(" "),a("full-calendar",{attrs:{eventos:e.datos},on:{actualizarEventos:e.actualizarVista}})],1)}),[],!1,null,"46dd52b0",null);t.default=l.exports},ctrV:function(e,t,a){"use strict";var s=a("HzdN");a.n(s).a}}]);