(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{"2Mic":function(t,a,i){"use strict";i.r(a);var s={name:"actividades",data:function(){return{actividad:{idActividad:0,actividad:null,undMedida:null,codigoActividad:null,requiereInforme:!1,tiempoinforme:0,idCategoria:null,idTema:null,idTipo:null,idGrupo:null},addGestorMatriz:{idGestor:null,idActividad:null,calificacion:null},popupActivo:!1,tipo:"nuevo",actividadSeleccionada:"",popupMatrizActivo:!1,listaCategoria:[],listaTema:[],listaTipo:[],listaGrupo:[],listaActividades:[],listaGestores:[],tempListaGestores:[],datosMatrizActividad:[]}},created:function(){this.consultarActividades(),this.consultarCombos(),this.consultarGestores()},methods:{consultarCombos:function(){var t=this;axios.post("/consultas/consultarCategoria").then((function(a){t.listaCategoria=a.data})),axios.post("/consultas/consultarTema").then((function(a){t.listaTema=a.data})),axios.post("/consultas/consultarTipo").then((function(a){t.listaTipo=a.data})),axios.post("/consultas/consultarGrupo").then((function(a){t.listaGrupo=a.data}))},guardarActividad:function(){var t=this;this.activeLoading=!0,axios.post("/maestros/guardarActividad",this.actividad).then((function(a){"nuevo"==t.tipo?t.mostrarNotificacion("Registro exitoso!","La actividad se ha registrado con exito!","success"):t.mostrarNotificacion("Datos actualizados!","La datos de la actividad se han actualizado con exito!","success"),t.reset(),t.popupActivo=!1,t.activeLoading=!1,t.consultarActividades()}))},consultarActividades:function(){var t=this;this.cargandoGeneral=!0,axios.post("/maestros/consultarActividades").then((function(a){t.listaActividades=a.data,t.cargandoGeneral=!1}))},reset:function(){this.actividad={idActividad:null,actividad:null,undMedida:null,codigoActividad:null,requiereInforme:!1,tiempoinforme:0,idCategoria:null,idTema:null,idTipo:null,idGrupo:null},this.tipo="nuevo",this.popupActivo=!0},actualizarActividad:function(t){this.actividad={idActividad:t.idActividad,actividad:t.actividad,undMedida:t.undMedida,codigoActividad:t.codigoActividad,requiereInforme:t.requiereInforme,tiempoinforme:t.tiempoinforme,idCategoria:t.idCategoria,idTema:t.idTema,idTipo:t.idTipo,idGrupo:t.idGrupo},this.tipo="actualizar",this.popupActivo=!0},consultarMatrizCualificacion:function(t,a){var i=this;this.actividadSeleccionada=a,this.cargandoGeneral=!0,this.addGestorMatriz.idActividad=t,axios.post("/maestros/consultarMatriz",{idActividad:t}).then((function(t){i.datosMatrizActividad=t.data,i.cargandoGeneral=!1,i.popupMatrizActivo=!0;var a=i;i.tempListaGestores=Object.assign([],i.listaGestores),$.each(i.datosMatrizActividad,(function(t,i){var s=a.tempListaGestores.findIndex((function(t){return t.id==i.idGestor}));s>=0&&a.tempListaGestores.splice(s,1)}))}))},eliminarGestor:function(t){var a=this;axios.post("/maestros/eliminarGestorMatriz",{id:t}).then((function(i){a.mostrarNotificacion("ELiminar gestor","Se ha eliminado el gestor de la matriz de cualificación","success"),a.datosMatrizActividad.splice(a.datosMatrizActividad.findIndex((function(a){return a.id==t})),1)}))},guardarGestorMatriz:function(){var t=this;this.activeLoading=!0,axios.post("/maestros/guardarGestorMatriz",this.addGestorMatriz).then((function(a){t.activeLoading=!1,t.mostrarNotificacion("Guardar gestor","Se ha registro la calificación del gestor con exito!","success"),t.consultarMatrizCualificacion(t.addGestorMatriz.idActividad,t.actividadSeleccionada),t.addGestorMatriz={idGestor:null,idActividad:t.addGestorMatriz.idActividad,calificacion:null}}))},consultarGestores:function(){var t=this;axios.post("/reservas/listaGestores").then((function(a){t.listaGestores=a.data}))},getNumbersInString:function(t){return t.split("").map((function(t){if(!isNaN(parseInt(t)))return t})).filter((function(t){return null!=t})).join("")}},watch:{"actividad.idTipo":{handler:function(t,a){var i=this,s=this.listaTipo.find((function(t){return t.id==i.actividad.idTipo})),e=(this.listaActividades[this.listaActividades.length-1],[]),d=this;$.each(this.listaActividades,(function(t,a){e.push(parseInt(d.getNumbersInString(a.codigoActividad)))})),this.actividad.codigoActividad=s.prefijo+(Math.max.apply(null,e)+1)},deep:!0}}},e=i("KHd+"),d=Object(e.a)(s,(function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("vs-row",[i("vs-col",{attrs:{"vs-sm":"12","vs-md":"12","vs-lg":"12"}},[i("vx-card",{attrs:{title:"Maestro de actividades"}},[i("div",{staticClass:"flex flex-wrap items-center mb-3"},[i("vs-button",{attrs:{color:"warning",type:"filled"},on:{click:t.reset}},[t._v("\n                    Agregar actividad\n                ")]),t._v(" "),i("vs-popup",{staticClass:"holamundo",attrs:{title:"Crear actividad",active:t.popupActivo},on:{"update:active":function(a){t.popupActivo=a}}},[i("ValidationObserver",{ref:"form"},[i("form",{on:{submit:function(a){return a.preventDefault(),t.guardarActividad(a)}}},[i("div",{staticClass:"vx-row"},[i("div",{staticClass:"vx-col sm:w-12/12 md:w-6/12 lg:w-6/12 w-full mb-2"},[i("validation-provider",{attrs:{name:"TIPO",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[i("vs-select",{staticClass:"w-full",staticStyle:{width:"100%"},attrs:{autocomplete:"",label:"Tipo"},on:{change:function(a){t.poputActivo=!1}},model:{value:t.actividad.idTipo,callback:function(a){t.$set(t.actividad,"idTipo",a)},expression:"actividad.idTipo"}},[i("vs-select-item",{key:"",attrs:{value:"",text:"---seleccione---"}}),t._v(" "),t._l(t.listaTipo,(function(t,a){return i("vs-select-item",{key:a,attrs:{value:t.id,text:t.nombre}})}))],2),t._v(" "),i("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}])})],1),t._v(" "),i("div",{staticClass:"vx-col sm:w-12/12 md:w-6/12 lg:w-6/12 w-full mb-2"},[i("validation-provider",{attrs:{name:"PREFIJO",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[i("vs-input",{staticClass:"w-full",attrs:{label:"Prefijo",disabled:!0},model:{value:t.actividad.codigoActividad,callback:function(a){t.$set(t.actividad,"codigoActividad",a)},expression:"actividad.codigoActividad"}}),t._v(" "),i("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}])})],1)]),t._v(" "),i("div",{staticClass:"vx-row"},[i("div",{staticClass:"vx-col sm:w-12/12 md:w-12/12 lg:w-12/12 w-full mb-2"},[i("validation-provider",{attrs:{name:"CATEGORIA",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[i("vs-select",{staticClass:"w-full",staticStyle:{width:"100%"},attrs:{autocomplete:"",label:"Categoria"},model:{value:t.actividad.idCategoria,callback:function(a){t.$set(t.actividad,"idCategoria",a)},expression:"actividad.idCategoria"}},[i("vs-select-item",{key:"",attrs:{value:"",text:"---seleccione---"}}),t._v(" "),t._l(t.listaCategoria,(function(t,a){return i("vs-select-item",{key:a,attrs:{value:t.id,text:t.nombre}})}))],2),t._v(" "),i("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}])})],1),t._v(" "),i("div",{staticClass:"vx-col sm:w-12/12 md:w-12/12 lg:w-12/12 w-full mb-2"},[i("validation-provider",{attrs:{name:"TEMA",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[i("vs-select",{staticClass:"w-full",staticStyle:{width:"100%"},attrs:{autocomplete:"",label:"Tema"},model:{value:t.actividad.idTema,callback:function(a){t.$set(t.actividad,"idTema",a)},expression:"actividad.idTema"}},[i("vs-select-item",{key:"",attrs:{value:"",text:"---seleccione---"}}),t._v(" "),t._l(t.listaTema,(function(t,a){return i("vs-select-item",{key:a,attrs:{value:t.id,text:t.nombre}})}))],2),t._v(" "),i("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}])})],1),t._v(" "),i("div",{staticClass:"vx-col sm:w-12/12 md:w-12/12 lg:w-12/12 w-full mb-2"},[i("validation-provider",{attrs:{name:"GRUPO",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[i("vs-select",{staticClass:"w-full",staticStyle:{width:"100%"},attrs:{autocomplete:"",label:"Grupo"},model:{value:t.actividad.idGrupo,callback:function(a){t.$set(t.actividad,"idGrupo",a)},expression:"actividad.idGrupo"}},[i("vs-select-item",{key:"",attrs:{value:"",text:"---seleccione---"}}),t._v(" "),t._l(t.listaGrupo,(function(t,a){return i("vs-select-item",{key:a,attrs:{value:t.id,text:t.nombre}})}))],2),t._v(" "),i("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}])})],1)]),t._v(" "),i("div",{staticClass:"vx-row"},[i("div",{staticClass:"vx-col sm:w-12/12 md:w-12/12 lg:w-12/12 w-full mb-2"},[i("validation-provider",{attrs:{name:"NOMBRE ACTIVIDAD",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[i("vs-input",{staticClass:"w-full",attrs:{label:"Nombre actividad"},model:{value:t.actividad.actividad,callback:function(a){t.$set(t.actividad,"actividad",a)},expression:"actividad.actividad"}}),t._v(" "),i("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}])})],1),t._v(" "),i("div",{staticClass:"vx-col sm:w-6/12 md:w-6/12 lg:w-6/12 w-full mb-2"},[i("label",[t._v("Require informe")]),t._v(" "),i("validation-provider",{attrs:{name:"REQUIERE INFORME",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[i("vs-switch",{model:{value:t.actividad.requiereInforme,callback:function(a){t.$set(t.actividad,"requiereInforme",a)},expression:"actividad.requiereInforme"}},[i("span",{attrs:{slot:"on"},slot:"on"},[t._v("Sí")]),t._v(" "),i("span",{attrs:{slot:"off"},slot:"off"},[t._v("No")])]),t._v(" "),i("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}])})],1),t._v(" "),t.actividad.requiereInforme?i("div",{staticClass:"vx-col sm:w-6/12 md:w-6/12 lg:w-6/12 w-full mb-2"},[i("validation-provider",{attrs:{name:"TIEMPO INFORME",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[i("vs-input",{staticClass:"w-full",attrs:{label:"Tiempo informe"},model:{value:t.actividad.tiempoinforme,callback:function(a){t.$set(t.actividad,"tiempoinforme",a)},expression:"actividad.tiempoinforme"}}),t._v(" "),i("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!1,3442171694)})],1):t._e()]),t._v(" "),i("div",{staticClass:"vx-row"},[i("div",{staticClass:"vx-col w-full text-center"},[i("boton",{attrs:{texto_cargando:"Guardando actividad...",type:"submit",texto:"Guardar actividad",cargando:t.activeLoading}})],1)])])])],1)],1),t._v(" "),i("vs-table",{attrs:{data:this.listaActividades,pagination:"","max-items":10,search:""},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.data;return t._l(s,(function(a,e){return i("vs-tr",{key:e},[i("vs-td",{attrs:{data:s[e].idActividad}},[t._v("\n                            "+t._s(s[e].idActividad)+"\n                        ")]),t._v(" "),i("vs-td",{attrs:{data:s[e].actividad}},[t._v("\n                            "+t._s(s[e].actividad)+"\n                        ")]),t._v(" "),i("vs-td",{attrs:{data:s[e].codigoActividad}},[t._v("\n                            "+t._s(s[e].codigoActividad)+"\n                        ")]),t._v(" "),i("vs-td",{attrs:{data:s[e].undMedida}},[t._v("\n                            "+t._s(s[e].undMedida)+"\n                        ")]),t._v(" "),i("vs-td",{attrs:{data:s[e].categoria}},[t._v("\n                            "+t._s(s[e].categoria)+"\n                        ")]),t._v(" "),i("vs-td",{attrs:{data:s[e].tema}},[t._v("\n                            "+t._s(s[e].tema)+"\n                        ")]),t._v(" "),i("vs-td",{attrs:{data:s[e].tipo}},[t._v("\n                            "+t._s(s[e].tipo)+"\n                        ")]),t._v(" "),i("vs-td",{attrs:{data:s[e].grupo}},[t._v("\n                            "+t._s(s[e].grupo)+"\n                        ")]),t._v(" "),i("vs-td",[i("vs-row",{attrs:{"vs-type":"flex","vs-justify":"flex-end"}},[i("vs-col",{attrs:{"vs-sm":"6","vs-md":"6","vs-lg":"6","vs-type":"flex","vs-justify":"end","vs-align":"end","vs-w":"6"}},[i("vx-tooltip",{attrs:{text:"Editar actividad"}},[i("span",{staticClass:"cursor-pointer",on:{click:function(a){return t.actualizarActividad(s[e])}}},[i("i",{staticClass:"bx bx-edit-alt"})])])],1),t._v(" "),i("vs-col",{attrs:{"vs-sm":"6","vs-md":"6","vs-lg":"6","vs-type":"flex","vs-justify":"end","vs-align":"end","vs-w":"6"}},[i("vx-tooltip",{attrs:{text:"Ver matriz de cualificación"}},[i("span",{staticClass:"cursor-pointer",on:{click:function(a){return t.consultarMatrizCualificacion(s[e].idActividad,s[e].actividad)}}},[i("i",{staticClass:"bx bx-add-to-queue"})])])],1)],1)],1)],1)}))}}])},[i("template",{slot:"thead"},[i("vs-th",[t._v("ID")]),t._v(" "),i("vs-th",[t._v("Actividad")]),t._v(" "),i("vs-th",[t._v("Prefijo")]),t._v(" "),i("vs-th",[t._v("Und. Medida")]),t._v(" "),i("vs-th",[t._v("Categoria")]),t._v(" "),i("vs-th",[t._v("Tema")]),t._v(" "),i("vs-th",[t._v("Tipo")]),t._v(" "),i("vs-th",[t._v("Grupo")]),t._v(" "),i("vs-th",[t._v("Acciones")])],1)],2)],1)],1),t._v(" "),i("vs-popup",{staticClass:"holamundo",attrs:{title:"Matriz de cualificación ("+t.actividadSeleccionada+")",active:t.popupMatrizActivo},on:{"update:active":function(a){t.popupMatrizActivo=a}}},[i("ValidationObserver",{ref:"form"},[i("form",{on:{submit:function(a){return a.preventDefault(),t.guardarGestorMatriz(a)}}},[i("div",{staticClass:"vx-row"},[i("div",{staticClass:"vx-col sm:w-12/12 md:w-6/12 lg:w-6/12 w-full mb-2"},[i("validation-provider",{attrs:{name:"GESTOR",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[i("vs-select",{staticClass:"w-full",staticStyle:{width:"100%"},attrs:{autocomplete:"",label:"Gestor"},model:{value:t.addGestorMatriz.idGestor,callback:function(a){t.$set(t.addGestorMatriz,"idGestor",a)},expression:"addGestorMatriz.idGestor"}},[i("vs-select-item",{key:"",attrs:{value:"",text:"---seleccione---"}}),t._v(" "),t._l(t.tempListaGestores,(function(t,a){return i("vs-select-item",{key:a,attrs:{value:t.id,text:t.text}})}))],2),t._v(" "),i("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}])})],1),t._v(" "),i("div",{staticClass:"vx-col sm:w-12/12 md:w-6/12 lg:w-6/12 w-full mb-2"},[i("validation-provider",{attrs:{name:"CALIFICACION",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[i("vs-select",{staticClass:"w-full",staticStyle:{width:"100%"},attrs:{autocomplete:"",label:"Calificación"},model:{value:t.addGestorMatriz.calificacion,callback:function(a){t.$set(t.addGestorMatriz,"calificacion",a)},expression:"addGestorMatriz.calificacion"}},[i("vs-select-item",{key:"",attrs:{value:"",text:"---seleccione---"}}),t._v(" "),i("vs-select-item",{key:0,attrs:{value:0,text:0}}),t._v(" "),i("vs-select-item",{key:5,attrs:{value:5,text:5}}),t._v(" "),i("vs-select-item",{key:10,attrs:{value:10,text:10}})],1),t._v(" "),i("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}])})],1)]),t._v(" "),i("div",{staticClass:"vx-row"},[i("div",{staticClass:"vx-col w-full text-center"},[i("boton",{attrs:{texto_cargando:"Guardando gestor...",type:"submit",texto:"Guardar gestor",cargando:t.activeLoading}})],1)])])]),t._v(" "),i("vs-table",{attrs:{data:this.datosMatrizActividad,pagination:"","max-items":10,search:""},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.data;return t._l(s,(function(a,e){return i("vs-tr",{key:e},[i("vs-td",{attrs:{data:s[e].id}},[t._v("\n                        "+t._s(s[e].id)+"\n                    ")]),t._v(" "),i("vs-td",{attrs:{data:s[e].gestor}},[t._v("\n                        "+t._s(s[e].gestor)+"\n                    ")]),t._v(" "),i("vs-td",{attrs:{data:s[e].calificacion}},[t._v("\n                        "+t._s(s[e].calificacion)+"\n                    ")]),t._v(" "),i("vs-td",[i("vs-row",{attrs:{"vs-type":"flex","vs-justify":"flex-end"}},[i("vs-col",{attrs:{"vs-sm":"6","vs-md":"6","vs-lg":"6","vs-type":"flex","vs-justify":"end","vs-align":"end","vs-w":"6"}},[i("vx-tooltip",{attrs:{text:"Eliminar gestor"}},[i("span",{staticClass:"cursor-pointer",on:{click:function(a){return t.eliminarGestor(s[e].id)}}},[i("i",{staticClass:"bx bxs-tag-x"})])])],1)],1)],1)],1)}))}}])},[i("template",{slot:"thead"},[i("vs-th",[t._v("ID")]),t._v(" "),i("vs-th",[t._v("Gestor")]),t._v(" "),i("vs-th",[t._v("Calificación")]),t._v(" "),i("vs-th",[t._v("Acciones")])],1)],2)],1)],1)}),[],!1,null,"c6d4cdc0",null);a.default=d.exports}}]);