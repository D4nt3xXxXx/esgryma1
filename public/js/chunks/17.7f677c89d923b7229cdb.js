(window.webpackJsonp=window.webpackJsonp||[]).push([[17,28],{"7B4b":function(t,o,a){var s=a("zwU7");"string"==typeof s&&(s=[[t.i,s,""]]);var e={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(s,e);s.locals&&(t.exports=s.locals)},"9M6K":function(t,o,a){(t.exports=a("I1BE")(!1)).push([t.i,"/*=========================================================================================\n    File Name: todo.scss\n    Description: Todo app's styles. This is imported in Todo.vue file\n    ----------------------------------------------------------------------------------------\n    Item Name: Vuexy - Vuejs, HTML & Laravel Admin Dashboard Template\n      Author: Pixinvent\n    Author URL: http://www.themeforest.net/user/pixinvent\n==========================================================================================*/\n#todo-app .vs-sidebar--background {\n  position: absolute;\n}\n#todo-app .todo-scroll-area {\n  position: relative;\n  width: 100%;\n  height: calc(100% - 70px);\n}\n[dir] #todo-app .todo-scroll-area {\n  margin: auto;\n}\n#todo-app .todo-content-scroll-area {\n  position: relative;\n  width: 100%;\n  height: calc(100% - 50px);\n}\n[dir] #todo-app .todo-content-scroll-area {\n  margin: auto;\n}\n#todo-app .todo_todo-item {\n  -webkit-transition: all 0.35s;\n  transition: all 0.35s;\n}\n#todo-app .list-item-component {\n  -webkit-transition: background-color 0.2s, -webkit-transform 0.2s;\n  transition: background-color 0.2s, -webkit-transform 0.2s;\n  transition: background-color 0.2s, transform 0.2s;\n  transition: background-color 0.2s, transform 0.2s, -webkit-transform 0.2s;\n}\n[dir] #todo-app .list-item-component {\n  border-top: 1px solid #dae1e7;\n}\n#todo-app .list-item-component:hover {\n  -webkit-transition: all 0.2s;\n  transition: all 0.2s;\n}\n[dir] #todo-app .list-item-component:hover {\n  -webkit-transform: translateY(-4px);\n          transform: translateY(-4px);\n  box-shadow: 0px 3px 10px 0px #ccc;\n}\n[dir=ltr] #todo-app .todo-list .todo-tags .con-vs-chip {\n  margin-right: 2px !important;\n}\n[dir=rtl] #todo-app .todo-list .todo-tags .con-vs-chip {\n  margin-left: 2px !important;\n}",""])},JfU9:function(t,o,a){"use strict";var s=a("7B4b");a.n(s).a},XIQh:function(t,o,a){"use strict";a.r(o);var s={SET_TODO_SEARCH_QUERY:function(t,o){t.todoSearchQuery=o},UPDATE_TODO_FILTER:function(t,o){t.todoFilter=o},SET_TASKS:function(t,o){t.tasks=o},SET_TAGS:function(t,o){t.taskTags=o},ADD_TASK:function(t,o){t.tasks.unshift(o)},UPDATE_TASK:function(t,o){var a=t.tasks.findIndex((function(t){return t.id==o.id}));Object.assign(t.tasks[a],o)}},e=a("bJaO"),i={namespaced:!0,state:{tasks:[],taskTags:[],todoSearchQuery:"",todoFilter:null},mutations:s,actions:{setTodoSearchQuery:function(t,o){(0,t.commit)("SET_TODO_SEARCH_QUERY",o)},fetchTasks:function(t,o){var a=t.commit;return new Promise((function(t,s){e.a.get("/api/apps/todo/tasks",{params:{filter:o.filter}}).then((function(o){a("SET_TASKS",o.data),t(o)})).catch((function(t){s(t)}))}))},fetchTags:function(t){var o=t.commit;return new Promise((function(t,a){e.a.get("/api/apps/todo/tags").then((function(a){o("SET_TAGS",a.data),t(a)})).catch((function(t){a(t)}))}))},addTask:function(t,o){var a=t.commit;return new Promise((function(t,s){e.a.post("/api/apps/todo/tasks/",{task:o}).then((function(s){a("ADD_TASK",Object.assign(o,{id:s.data.id})),t(s)})).catch((function(t){s(t)}))}))},updateTask:function(t,o){var a=t.commit;return new Promise((function(t,s){e.a.post("/api/apps/todo/task/".concat(o.id),{task:o}).then((function(o){a("UPDATE_TASK",o.data),t(o)})).catch((function(t){s(t)}))}))}},getters:{queriedTasks:function(t){return t.tasks.filter((function(o){var a=!1;return("all"===t.todoFilter&&!o.isTrashed||"important"===t.todoFilter&&!o.isTrashed&&o.isImportant||"starred"===t.todoFilter&&!o.isTrashed&&o.isStarred||"completed"===t.todoFilter&&!o.isTrashed&&o.isCompleted||"trashed"===t.todoFilter&&o.isTrashed||o.tags.includes(t.todoFilter))&&(a=!0),a&&(o.title.toLowerCase().includes(t.todoSearchQuery.toLowerCase())||o.desc.toLowerCase().includes(t.todoSearchQuery.toLowerCase()))}))},getTask:function(t){return function(o){return t.tasks.find((function(t){return t.id==o}))}}}},n={data:function(){return{activePrompt:!1,taskLocal:{title:"",desc:"",isCompleted:!1,isImportant:!1,isStarred:!1,tags:[]}}},computed:{taskTags:function(){return this.$store.state.todo.taskTags},validateForm:function(){return!0}},methods:{clearFields:function(){Object.assign(this.taskLocal,{title:"",desc:"",isCompleted:!1,isImportant:!1,isStarred:!1,tags:[]})},addTodo:function(){var t=this;this.$validator.validateAll().then((function(o){o&&(t.$store.dispatch("todo/addTask",Object.assign({},t.taskLocal)),t.clearFields())}))}}},r=a("KHd+"),c=Object(r.a)(n,(function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("div",{staticClass:"px-6 pb-2 pt-6"},[a("a",{staticClass:"vs-button vs-button-primary",staticStyle:{"background-color":"rgb(255, 159, 67)",color:"white"},attrs:{target:"_blank",href:"/app/agenda"}},[t._v("\n        Ver agenda\n    ")]),t._v(" "),a("vs-prompt",{attrs:{title:"Add Task","accept-text":"Add Task","button-cancel":"border","is-valid":t.validateForm,active:t.activePrompt},on:{cancel:t.clearFields,accept:t.addTodo,close:t.clearFields,"update:active":function(o){t.activePrompt=o}}},[a("div",[a("form",[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col ml-auto flex"},[a("feather-icon",{staticClass:"cursor-pointer",attrs:{icon:"InfoIcon",svgClasses:[{"text-success stroke-current":t.taskLocal.isImportant},"w-5","h-5 mr-4"]},on:{click:function(o){o.preventDefault(),t.taskLocal.isImportant=!t.taskLocal.isImportant}}}),t._v(" "),a("feather-icon",{staticClass:"cursor-pointer",attrs:{icon:"StarIcon",svgClasses:[{"text-warning stroke-current":t.taskLocal.isStarred},"w-5","h-5 mr-4"]},on:{click:function(o){o.preventDefault(),t.taskLocal.isStarred=!t.taskLocal.isStarred}}}),t._v(" "),a("vs-dropdown",{staticClass:"cursor-pointer flex",attrs:{"vs-custom-content":""}},[a("feather-icon",{attrs:{icon:"TagIcon",svgClasses:"h-5 w-5"},on:{click:function(t){t.preventDefault()}}}),t._v(" "),a("vs-dropdown-menu",{staticStyle:{"z-index":"200001"}},t._l(t.taskTags,(function(o,s){return a("vs-dropdown-item",{key:s},[a("vs-checkbox",{attrs:{"vs-value":o.value},on:{click:function(t){t.stopPropagation()}},model:{value:t.taskLocal.tags,callback:function(o){t.$set(t.taskLocal,"tags",o)},expression:"taskLocal.tags"}},[t._v(t._s(o.text)+"\n                                    ")])],1)})),1)],1)],1)]),t._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full mb-4 mt-5",attrs:{name:"title",placeholder:"Title",color:t.validateForm?"success":"danger"},model:{value:t.taskLocal.title,callback:function(o){t.$set(t.taskLocal,"title",o)},expression:"taskLocal.title"}}),t._v(" "),a("vs-textarea",{attrs:{rows:"5",label:"Add description"},model:{value:t.taskLocal.desc,callback:function(o){t.$set(t.taskLocal,"desc",o)},expression:"taskLocal.desc"}})],1)])])])])],1)}),[],!1,null,null,null).exports,l={props:{taskId:{type:Number,required:!0},datos:{type:[Array,Object],required:!0}},data:function(){return{taskLocal:this.datos,abrirPoput:!1,idReserva:null}},computed:{isCompleted:{get:function(){return!0},set:function(t){var o=this;this.$store.dispatch("todo/updateTask",Object.assign({},this.taskLocal,{isCompleted:t})).then((function(t){o.taskLocal.isCompleted=t.data.isCompleted})).catch((function(t){console.error(t)}))}},todoLabelColor:function(){var t=this;return function(o){return t.$store.state.todo.taskTags.find((function(t){return t.value==o})).color}}},methods:{toggleIsImportant:function(t){this.$emit("verOrden",t)},toggleIsStarred:function(){var t=this;this.$store.dispatch("todo/updateTask",Object.assign({},this.taskLocal,{isStarred:!this.taskLocal.isStarred})).then((function(o){t.taskLocal.isStarred=o.data.isStarred})).catch((function(t){console.error(t)}))},moveToTrash:function(){var t=this;this.$store.dispatch("todo/updateTask",Object.assign({},this.taskLocal,{isTrashed:!0})).then((function(o){t.taskLocal.isTrashed=o.data.isTrashed,t.$el.style.display="none"})).catch((function(t){console.error(t)}))},displayPrompt:function(){this.$emit("showDisplayPrompt",this.taskId)},actualizarEstado:function(t,o,a,s){var e=this;o=null==o||""==o;var i="llamada"==a?"llamada al cliente":"llegada al sitio";this.$swal.fire({title:"Guardar "+i,text:"NOTA: una vez guardada la información se notificara al asistente encargado.",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, guardar!"}).then((function(i){i.value&&axios.post("/gestor/actualizarEstados",{idOT:t,valor:o,opcion:a,datosOT:s}).then((function(t){var o="";"llamada"==a?(o="Se agrego tu llamada al cliente con exito!",e.taskLocal.llamada=t.data):(o="Se agrego tu ubicación con exito!",e.taskLocal.llegada=t.data),e.mostrarNotificacion("Actualización exitosa",o,"success")}))}))}}},d=Object(r.a)(l,(function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("div",{staticClass:"px-4 py-4 list-item-component",on:{click:t.displayPrompt}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full sm:w-5/6 flex sm:items-center sm:flex-row flex-col"},[a("div",{staticClass:"flex items-center"},[a("h6",{staticClass:"todo-title",class:{"line-through":t.taskLocal.isCompleted}},[t._v("\n                    "+t._s(t.taskLocal.nroorden+" - "+t.taskLocal.actividad)+"\n                ")])]),t._v(" "),a("div",{staticClass:"todo-tags sm:ml-2 sm:my-0 my-2 flex"},[a("vs-chip",[a("div",{staticClass:"h-2 w-2 rounded-full mr-1",class:"bg-primary"}),t._v(" "),a("span",[t._v(t._s(t._f("capitalize")(t.taskLocal.nomEstado)))])])],1)]),t._v(" "),a("div",{staticClass:"vx-col w-full sm:w-1/6 ml-auto flex sm:justify-end"},[a("vs-avatar",{attrs:{transparent:"",icon:"remove_red_eye"},on:{click:function(o){return o.stopPropagation(),t.toggleIsImportant(t.taskLocal.idReserva)}}}),t._v(" "),a("vs-avatar",{attrs:{transparent:"",color:null==t.taskLocal.llegada||""==t.taskLocal.llegada?"dark":"success",icon:"my_location"},on:{click:function(o){return o.stopPropagation(),t.actualizarEstado(t.taskLocal.idOT,t.taskLocal.llegada,"llegada",t.taskLocal)}}}),t._v(" "),a("vs-avatar",{attrs:{transparent:"",color:null==t.taskLocal.llamada||""==t.taskLocal.llamada?"dark":"success",icon:"call"},on:{click:function(o){return o.stopPropagation(),t.actualizarEstado(t.taskLocal.idOT,t.taskLocal.llamada,"llamada",t.taskLocal)}}})],1)]),t._v(" "),t.taskLocal.tipoActividad?a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full"},[a("p",{staticClass:"mt-2 truncate",class:{"line-through":t.taskLocal.isCompleted}},[t._v("\n                "+t._s(t.taskLocal.fechaActividad)+" - "+t._s(t.taskLocal.tipoActividad)+" - "+t._s(t.taskLocal.empresaOrden))])])]):t._e()])}),[],!1,null,null,null).exports,u={data:function(){return{todoFilters:[{filterName:"Capacitación y Entrenamiento",filter:"Capacitación y Entrenamiento",icon:"StarIcon"},{filterName:"Asesoria y Consultoria",filter:"Asesoria y Consultoria",icon:"InfoIcon"},{filterName:"Centro de Entrenamiento",filter:"Centro de Entrenamiento",icon:"CheckIcon"}],listaTipoActividad:[],listaEstadoOT:[]}},computed:{taskTags:function(){return[{value:"PROGRAMADA",text:"PROGRAMADA"},{value:"REALIZADA - PEND INF",text:"REALIZADA - PEND INF"},{value:"REALIZADA - PEND REV",text:"REALIZADA - PEND REV"},{value:"EJECUTADA",text:"EJECUTADA"},{value:"EJECUTADA - PEND INF",text:"EJECUTADA - PEND INF"}]},todoFilter:function(){return this.$route.params.filter},baseUrl:function(){var t=this.$route.path;return t.slice(0,t.lastIndexOf("/"))}},created:function(){this.consultarTipoActividad(),this.consultarEstadoOT()},methods:{consultarTipoActividad:function(){var t=this;axios.post("/ordenes/tipoActividad").then((function(o){t.listaTipoActividad=o.data}))},consultarEstadoOT:function(){var t=this;axios.post("/consultas/consultarEstadoOT").then((function(o){t.listaEstadoOT=o.data}))},consultaFiltro:function(t,o){this.$parent.$parent.$parent.consultarOTGestor(t,o)}}},p=Object(r.a)(u,(function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("div",{staticClass:"todo__filters-container"},[a("div",{staticClass:"px-6 py-4"},[a("div",{staticClass:"flex cursor-pointer",class:{"text-primary":"all"==t.todoFilter},attrs:{tag:"span"},on:{click:function(o){return t.consultaFiltro(0,"todo")}}},[a("feather-icon",{attrs:{icon:"LayersIcon",svgClasses:[{"text-primary stroke-current":"all"==t.todoFilter},"h-6 w-6"]}}),t._v(" "),a("span",{staticClass:"text-lg ml-3"},[t._v("Todas")])],1)]),t._v(" "),a("vs-divider"),t._v(" "),a("div",{staticClass:"px-6 py-4"},[a("h5",[t._v("Tipo")]),t._v(" "),t._l(t.listaTipoActividad,(function(o){return[a("div",{key:o.filter,staticClass:"flex mt-6 cursor-pointer",class:{"text-primary":t.todoFilter==o.text},attrs:{tag:"span"},on:{click:function(a){return t.consultaFiltro(o.id,"tipoActividad")}}},[a("feather-icon",{attrs:{icon:"InfoIcon",svgClasses:[{"text-primary stroke-current":t.todoFilter==o.text},"h-6 w-6"]}}),t._v(" "),a("span",{staticClass:"text-lg ml-3"},[t._v(t._s(o.text))])],1)]}))],2),t._v(" "),a("vs-divider"),t._v(" "),a("div",{staticClass:"px-6 py-4"},[a("h5",[t._v("Estado OT")]),t._v(" "),a("div",{staticClass:"todo__lables-list"},t._l(t.listaEstadoOT,(function(o,s){return a("div",{key:s,staticClass:"todo__label flex items-center mt-6 cursor-pointer",attrs:{tag:"span"},on:{click:function(a){return t.consultaFiltro(o.idEstado,"estadoOT")}}},[a("div",{staticClass:"ml-1 h-3 w-3 rounded-full mr-4",class:"border-2 border-solid border-"}),t._v(" "),a("span",{staticClass:"text-lg",class:{"text-primary":t.todoFilter==o.nomEstado}},[t._v(t._s(o.nomEstado))])])})),0)])],1)}),[],!1,null,null,null).exports,v={props:{displayPrompt:{type:Boolean,required:!0},taskId:{type:Number,required:!0}},data:function(){return{taskLocal:Object.assign({},this.$store.getters["todo/getTask"](this.taskId))}},computed:{activePrompt:{get:function(){return this.displayPrompt},set:function(t){this.$emit("hideDisplayPrompt",t)}},taskTags:function(){return this.$store.state.todo.taskTags},validateForm:function(){return!this.errors.any()&&""!=this.taskLocal.title}},methods:{removeTodo:function(){var t=this;this.$store.dispatch("todo/updateTask",Object.assign({},this.taskLocal,{isTrashed:!0})).then((function(){t.$store.dispatch("todo/fetchTasks",{filter:t.$route.params.filter})})).catch((function(t){console.error(t)}))},init:function(){this.taskLocal=Object.assign({},this.$store.getters["todo/getTask"](this.taskId))},submitTodo:function(){this.$store.dispatch("todo/updateTask",this.taskLocal)}}},f=Object(r.a)(v,(function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("vs-prompt",{attrs:{title:"Edit Task","accept-text":"Submit","cancel-text":"Remove","button-cancel":"border","is-valid":t.validateForm,active:t.activePrompt},on:{cancel:t.removeTodo,accept:t.submitTodo,close:t.init,"update:active":function(o){t.activePrompt=o}}},[a("div",[a("form",[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-1/6 self-center"},[a("vs-checkbox",{staticClass:"w-8",model:{value:t.taskLocal.isCompleted,callback:function(o){t.$set(t.taskLocal,"isCompleted",o)},expression:"taskLocal.isCompleted"}})],1),t._v(" "),a("div",{staticClass:"vx-col ml-auto flex"},[a("feather-icon",{staticClass:"cursor-pointer",attrs:{icon:"InfoIcon",svgClasses:[{"text-success stroke-current":t.taskLocal.isImportant},"w-5","h-5 mr-4"]},on:{click:function(o){o.preventDefault(),t.taskLocal.isImportant=!t.taskLocal.isImportant}}}),t._v(" "),a("feather-icon",{staticClass:"cursor-pointer",attrs:{icon:"StarIcon",svgClasses:[{"text-warning stroke-current":t.taskLocal.isStarred},"w-5","h-5 mr-4"]},on:{click:function(o){o.preventDefault(),t.taskLocal.isStarred=!t.taskLocal.isStarred}}}),t._v(" "),a("vs-dropdown",{staticClass:"cursor-pointer flex",attrs:{"vs-custom-content":""}},[a("feather-icon",{attrs:{icon:"TagIcon",svgClasses:"h-5 w-5"}}),t._v(" "),a("vs-dropdown-menu",{staticStyle:{"z-index":"200001"}},t._l(t.taskTags,(function(o,s){return a("vs-dropdown-item",{key:s},[a("vs-checkbox",{attrs:{"vs-value":o.value},on:{click:function(t){t.stopPropagation()}},model:{value:t.taskLocal.tags,callback:function(o){t.$set(t.taskLocal,"tags",o)},expression:"taskLocal.tags"}},[t._v(t._s(o.text))])],1)})),1)],1)],1)]),t._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full mb-4 mt-5",attrs:{name:"title",placeholder:"Title"},model:{value:t.taskLocal.title,callback:function(o){t.$set(t.taskLocal,"title",o)},expression:"taskLocal.title"}}),t._v(" "),a("vs-textarea",{attrs:{rows:"5",label:"Add description"},model:{value:t.taskLocal.desc,callback:function(o){t.$set(t.taskLocal,"desc",o)},expression:"taskLocal.desc"}})],1)])])])])}),[],!1,null,null,null).exports,h=a("nWMH"),m=a.n(h),g=a("YhOx"),k=a("QvIH"),b={data:function(){return{currFilter:"",clickNotClose:!0,displayPrompt:!1,taskIdToEdit:0,isSidebarActive:!0,settings:{maxScrollbarLength:60,wheelSpeed:.3},buscar:"",datosOT:[],abrirPoput:!1,idReserva:null}},watch:{todoFilter:function(){this.$refs.taskListPS.$el.scrollTop=0,this.toggleTodoSidebar();var t=this.$route.params.filter;this.$store.dispatch("todo/fetchTasks",{filter:t}),this.$store.commit("todo/UPDATE_TODO_FILTER",t)},windowWidth:function(){this.setSidebarWidth()}},computed:{todo:function(){return this.$store.state.todo.todoArray},todoFilter:function(){return this.$route.params.filter},taskList:function(){return this.datosOT},searchQuery:{get:function(){this.consultarOTGestor("","buscar")},set:function(t){this.consultarOTGestor(t,"buscar")}},windowWidth:function(){return this.$store.state.windowWidth}},methods:{showDisplayPrompt:function(t){this.taskIdToEdit=t,this.displayPrompt=!0,console.log("llego")},hidePrompt:function(){this.displayPrompt=!1},setSidebarWidth:function(){this.windowWidth<992?this.isSidebarActive=this.clickNotClose=!1:this.isSidebarActive=this.clickNotClose=!0},toggleTodoSidebar:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!t&&this.clickNotClose||(this.isSidebarActive=t)},consultarOTGestor:function(t,o){var a=this;this.cargandoGeneral=!0,axios.post("/gestor/listarOT",{id:t,tipo:o}).then((function(t){a.cargandoGeneral=!1,a.datosOT=t.data,a.$refs.taskListPS.$el.scrollTop=0}))},datosOrden:function(t){this.abrirPoput=!0,this.idReserva=t},changeVistaGestor:function(){this.abrirPoput=!1,this.consultarOTGestor(6,"estadoOT")}},components:{Notificacion:g.default,TodoAddNew:c,TodoTask:d,TodoFilters:p,TodoEdit:f,VuePerfectScrollbar:m.a,ordenesGestionView:k.a},created:function(){this.consultarOTGestor("",""),this.$store.registerModule("todo",i),this.setSidebarWidth();var t=this.$route.params.filter;this.$store.dispatch("todo/fetchTasks",{filter:t}),this.$store.commit("todo/UPDATE_TODO_FILTER",t),this.$store.dispatch("todo/fetchTags")},beforeUpdate:function(){this.currFilter=this.$route.params.filter},beforeDestroy:function(){this.$store.unregisterModule("todo")},mounted:function(){}},T=(a("r4bq"),Object(r.a)(b,(function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("div",{staticClass:"border border-solid d-theme-border-grey-light rounded relative overflow-hidden",attrs:{id:"todo-app"}},[a("vs-sidebar",{staticClass:"items-no-padding",attrs:{parent:"#todo-app","click-not-close":t.clickNotClose,"hidden-background":t.clickNotClose},model:{value:t.isSidebarActive,callback:function(o){t.isSidebarActive=o},expression:"isSidebarActive"}},[a("todo-add-new"),t._v(" "),a("VuePerfectScrollbar",{key:t.$vs.rtl,staticClass:"todo-scroll-area",attrs:{settings:t.settings}},[a("todo-filters",{on:{closeSidebar:t.toggleTodoSidebar}})],1)],1),t._v(" "),a("div",{staticClass:"no-scroll-content border border-r-0 border-b-0 border-t-0 border-solid d-theme-border-grey-light no-scroll-content",class:{"sidebar-spacer":t.clickNotClose}},[a("div",{staticClass:"flex d-theme-dark-bg items-center border border-l-0 border-r-0 border-t-0 border-solid d-theme-border-grey-light"},[a("feather-icon",{staticClass:"md:inline-flex lg:hidden ml-4 mr-4 cursor-pointer",attrs:{icon:"MenuIcon"},on:{click:function(o){return o.stopPropagation(),t.toggleTodoSidebar(!0)}}}),t._v(" "),a("vs-input",{staticClass:"vs-input-no-border vs-input-no-shdow-focus w-full",attrs:{"icon-no-border":"",size:"large","icon-pack":"feather",icon:"icon-search",placeholder:"Buscar..."},on:{keydown:function(o){return t.consultarOTGestor(t.buscar,"buscar")}},model:{value:t.buscar,callback:function(o){t.buscar=o},expression:"buscar"}})],1),t._v(" "),a("VuePerfectScrollbar",{key:t.$vs.rtl,ref:"taskListPS",staticClass:"todo-content-scroll-area",attrs:{settings:t.settings}},[a("transition-group",{staticClass:"todo-list",attrs:{name:"list-enter-up",tag:"ul",appear:""}},t._l(t.taskList,(function(o,s){return a("li",{key:String(t.currFilter)+String(o.id),staticClass:"cursor-pointer todo_todo-item",style:[{transitionDelay:.1*s+"s"}]},[a("todo-task",{key:String(o.actividad)+String(o.nomEstado),attrs:{datos:o,taskId:o.idOT},on:{verOrden:t.datosOrden,consultarFiltro:t.consultarOTGestor}})],1)})),0)],1)],1),t._v(" "),a("vs-popup",{attrs:{fullscreen:"",classContent:"popup-example",title:"Información orden de trabajo ",active:t.abrirPoput},on:{"update:active":function(o){t.abrirPoput=o}}},[a("ordenes-gestion-view",{ref:"componente_gestionar_orden",attrs:{"id-reserva":t.idReserva},on:{actualizarVistaGestor:t.changeVistaGestor}})],1)],1)}),[],!1,null,null,null));o.default=T.exports},XWY0:function(t,o,a){var s=a("9M6K");"string"==typeof s&&(s=[[t.i,s,""]]);var e={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(s,e);s.locals&&(t.exports=s.locals)},YhOx:function(t,o,a){"use strict";a.r(o);var s=a("vDqi"),e=a.n(s),i={data:function(){return{loading:!1,isPushEnabled:!1,pushButtonDisabled:!0}},mounted:function(){this.registerServiceWorker()},methods:{registerServiceWorker:function(){var t=this;"serviceWorker"in navigator?navigator.serviceWorker.register("/sw.js").then((function(){return t.initialiseServiceWorker()})):console.log("Service workers aren't supported in this browser.")},initialiseServiceWorker:function(){var t=this;"showNotification"in ServiceWorkerRegistration.prototype?"denied"!==Notification.permission?"PushManager"in window?navigator.serviceWorker.ready.then((function(o){o.pushManager.getSubscription().then((function(o){t.pushButtonDisabled=!1,o&&(t.updateSubscription(o),t.isPushEnabled=!0)})).catch((function(t){console.log("Error during getSubscription()",t)}))})):console.log("Push messaging isn't supported."):console.log("The user has blocked notifications."):console.log("Notifications aren't supported.")},subscribe:function(){var t=this;navigator.serviceWorker.ready.then((function(o){var a={userVisibleOnly:!0},s=window.Laravel.vapidPublicKey;s&&(a.applicationServerKey=t.urlBase64ToUint8Array(s)),o.pushManager.subscribe(a).then((function(o){t.isPushEnabled=!0,t.pushButtonDisabled=!1,t.updateSubscription(o)})).catch((function(o){"denied"===Notification.permission?(console.log("Permission for Notifications was denied"),t.pushButtonDisabled=!0):(console.log("Unable to subscribe to push.",o),t.pushButtonDisabled=!1)}))}))},unsubscribe:function(){var t=this;navigator.serviceWorker.ready.then((function(o){o.pushManager.getSubscription().then((function(o){if(!o)return t.isPushEnabled=!1,void(t.pushButtonDisabled=!1);o.unsubscribe().then((function(){t.deleteSubscription(o),t.isPushEnabled=!1,t.pushButtonDisabled=!1})).catch((function(o){console.log("Unsubscription error: ",o),t.pushButtonDisabled=!1}))})).catch((function(t){console.log("Error thrown while unsubscribing.",t)}))}))},togglePush:function(){this.isPushEnabled?this.unsubscribe():this.subscribe()},updateSubscription:function(t){var o=this,a=t.getKey("p256dh"),s=t.getKey("auth"),i=(PushManager.supportedContentEncodings||["aesgcm"])[0],n={endpoint:t.endpoint,publicKey:a?btoa(String.fromCharCode.apply(null,new Uint8Array(a))):null,authToken:s?btoa(String.fromCharCode.apply(null,new Uint8Array(s))):null,contentEncoding:i};this.loading=!0,e.a.post("/subscriptions",n).then((function(){o.loading=!1}))},deleteSubscription:function(t){var o=this;this.loading=!0,e.a.post("/subscriptions/delete",{endpoint:t.endpoint}).then((function(){o.loading=!1}))},sendNotification:function(){var t=this;this.loading=!0,e.a.post("/notifications").catch((function(t){return console.log(t)})).then((function(){t.loading=!1}))},urlBase64ToUint8Array:function(t){for(var o=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),a=window.atob(o),s=new Uint8Array(a.length),e=0;e<a.length;++e)s[e]=a.charCodeAt(e);return s}}},n=(a("JfU9"),a("KHd+")),r=Object(n.a)(i,(function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("div",[a("vs-button",{attrs:{disabled:t.loading,type:"filled"},on:{click:t.sendNotification}},[t._v("Enviarme una notificación")]),t._v(" "),a("vs-button",{class:{"vs-button-info":!t.isPushEnabled,"vs-button-danger":t.isPushEnabled},attrs:{disabled:t.pushButtonDisabled||t.loading,type:"filled"},on:{click:t.togglePush}},[t._v(t._s(t.isPushEnabled?"Denegar":"Permitir")+" notificación")])],1)}),[],!1,null,"05d54fe4",null);o.default=r.exports},r4bq:function(t,o,a){"use strict";var s=a("XWY0");a.n(s).a},zwU7:function(t,o,a){(t.exports=a("I1BE")(!1)).push([t.i,"[dir] .btn[data-v-05d54fe4] {\n  margin-bottom: 10px;\n}[dir=ltr] .btn[data-v-05d54fe4] {\n  margin-right: 10px;\n}[dir=rtl] .btn[data-v-05d54fe4] {\n  margin-left: 10px;\n}\n",""])}}]);