(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"9Fh8":function(e,t,s){"use strict";var a=s("3Am6"),n=s("iOEq"),i=s("p8AH"),o=s("+Izv"),l=s("I83f"),r=s.n(l),d=(s("wd/R"),s("YfZs"),s("KN1T"),s("QvIH")),c={name:"verNovedad",props:{buscarReserva:{required:!0},idNovedad:{type:Number}},data:function(){return{datos:[]}},methods:{consultarNovedad:function(){var e=this;axios.post("/procesos/consultarNovedad",{idNovedad:this.idNovedad}).then((function(t){e.datos=t.data[0]}))}},watch:{buscarReserva:{immediate:!0,handler:function(e,t){"si"==this.buscarReserva&&""!=this.idNovedad&&null!=this.idNovedad&&this.consultarNovedad()}}}},u=s("KHd+"),v=Object(u.a)(c,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return Object.keys(e.datos).length>0?s("ValidationObserver",{ref:"form"},[s("form",[s("div",{staticClass:"vx-row"},[s("div",{staticClass:"vx-col sm:w-12/12 md:w-6/12 lg:w-6/12 w-full mb-2"},[s("vs-input",{staticClass:"w-full",attrs:{label:"Novedad"},model:{value:e.datos.novedad,callback:function(t){e.$set(e.datos,"novedad",t)},expression:"datos.novedad"}})],1),e._v(" "),s("div",{staticClass:"vx-col sm:w-12/12 md:w-12/12 lg:w-12/12 w-full mb-2"},e._l(e.datos.gestor.split(","),(function(t){return s("vs-chip",[s("vs-avatar"),e._v("\n                    "+e._s(t)+"\n                ")],1)})),1)]),e._v(" "),s("div",{staticClass:"vx-row"},[s("div",{staticClass:"vx-col sm:w-12/12 md:w-6/12 lg:w-6/12 w-full mb-2"},[s("vs-input",{staticClass:"w-full",attrs:{label:"Fecha inicio"},model:{value:e.datos.fechaInicio,callback:function(t){e.$set(e.datos,"fechaInicio",t)},expression:"datos.fechaInicio"}})],1),e._v(" "),s("div",{staticClass:"vx-col sm:w-12/12 md:w-4/12 lg:w-4/12 w-full mb-2"},[s("vs-input",{staticClass:"w-full",attrs:{label:"Fecha fin"},model:{value:e.datos.fechaFin,callback:function(t){e.$set(e.datos,"fechaFin",t)},expression:"datos.fechaFin"}})],1),e._v(" "),s("div",{staticClass:"vx-col sm:w-12/12 md:w-2/12 lg:w-2/12 w-full mb-2"},[s("vs-input",{staticClass:"w-full",attrs:{label:"Horas"},model:{value:e.datos.horas,callback:function(t){e.$set(e.datos,"horas",t)},expression:"datos.horas"}})],1),e._v(" "),s("div",{staticClass:"vx-col sm:w-12/12 md:w-12/12 lg:w-12/12 w-full mb-2"},[s("vs-input",{staticClass:"w-full",attrs:{label:"Observación"},model:{value:e.datos.observacion,callback:function(t){e.$set(e.datos,"observacion",t)},expression:"datos.observacion"}})],1)])])]):e._e()}),[],!1,null,"0d842e80",null).exports,h={name:"fullCalendar",props:{titulo:"",eventos:{type:[Array,Object]}},components:{FullCalendar:a.a,ordenesGestionView:d.a,verNovedad:v},data:function(){return{fechaActual:new Date,opcion:"OT",fechaInicio:null,fechaFin:null,buscar:null,file:null,abrirPoput:!1,idReserva:null,idNovedad:null,calendarPlugins:[n.d,o.a,i.a],calendarWeekends:!0,calendarEvents:[],local:r.a,config:{editable:!1,defaultView:"month",selectable:!0,timeZone:"America/Bogota"},calendarView:"dayGridMonth",calendarViewTypes:[{label:"Mes",val:"dayGridMonth"},{label:"Semana",val:"timeGridWeek"},{label:"Día",val:"timeGridDay"},{label:"Agenda",val:"listWeek"}],tituloSiguiente:""}},computed:{windowWidth:function(){return this.$store.state.windowWidth}},methods:{updateMonth:function(e){var t=this.$refs.calendar.getApi();e>0?t.next():t.prev(),this.tituloSiguiente=t.view.view.title,this.$emit("actualizarEventos")},toggleWeekends:function(){this.calendarWeekends=!this.calendarWeekends},gotoPast:function(){this.$refs.fullCalendar.getApi().gotoDate(new Date)},handleDateClick:function(e){},infoEvento:function(e){if("OT"==e.event.extendedProps.tipo){this.opcion="OT",this.buscar="no";var t=e.event.id;this.idReserva=parseInt(t)}else this.opcion="RESERVA",this.buscar="si",this.fechaInicio=e.event.start,this.fechaFin=e.event.end,this.idNovedad=parseInt(e.event.id);this.abrirPoput=!0},actualizarVistas:function(e){this.$refs.calendar.getApi().changeView(e),this.calendarView=e,this.tituloSiguiente=this.$refs.calendar.getApi().view.view.title,this.$emit("actualizarEventos")},mostrarTooltip:function(e){}},mounted:function(){this.tituloSiguiente=this.$refs.calendar.getApi().view.view.title;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&this.$refs.calendar.getApi().changeView("listWeek"),console.log(new Date)},watch:{abrirPoput:function(e){e||(this.idReserva=null,this.buscar=null)}}},f=(s("ctrV"),Object(u.a)(h,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("vs-card",[s("div",{staticClass:"vx-row no-gutter"},[s("div",{staticClass:"vx-col w-1/3 items-center sm:flex hidden"}),e._v(" "),s("div",{staticClass:"vx-col sm:w-1/3 w-full sm:my-0 my-3 flex sm:justify-end justify-center order-last"},[s("div",{staticClass:"flex items-center"},[s("feather-icon",{staticClass:"cursor-pointer bg-primary text-white rounded-full",attrs:{icon:e.$vs.rtl?"ChevronRightIcon":"ChevronLeftIcon",svgClasses:"w-5 h-5 m-1"},on:{click:function(t){return e.updateMonth(-1)}}}),e._v(" "),s("span",{staticClass:"mx-3 text-xl font-medium whitespace-no-wrap"},[e._v(e._s(e.tituloSiguiente))]),e._v(" "),s("feather-icon",{staticClass:"cursor-pointer bg-primary text-white rounded-full",attrs:{icon:e.$vs.rtl?"ChevronLeftIcon":"ChevronRightIcon",svgClasses:"w-5 h-5 m-1"},on:{click:function(t){return e.updateMonth(1)}}})],1)]),e._v(" "),s("div",{staticClass:"vx-col sm:w-1/3 w-full flex justify-center"},[e._l(e.calendarViewTypes,(function(t,a){return[e.calendarView===t.val?s("vs-button",{key:String(t.val)+"filled",staticClass:"p-3 md:px-8 md:py-3",class:{"border-l-0 rounded-l-none":a,"rounded-r-none":e.calendarViewTypes.length!==a+1},attrs:{type:"filled"},on:{click:function(s){return e.actualizarVistas(t.val)}}},[e._v(e._s(t.label)+"\n                ")]):s("vs-button",{key:String(t.val)+"border",staticClass:"p-3 md:px-8 md:py-3",class:{"border-l-0 rounded-l-none":a,"rounded-r-none":e.calendarViewTypes.length!==a+1},attrs:{type:"border"},on:{click:function(s){return e.actualizarVistas(t.val)}}},[e._v(e._s(t.label)+"\n                ")])]}))],2)]),e._v(" "),s("FullCalendar",{ref:"calendar",attrs:{locale:e.local,header:{left:"today",center:"",right:""},"time-zone":"America/Bogota",defaultView:"dayGridMonth",events:e.eventos,schedulerLicenseKey:"0199165136-fcs-1577368450",plugins:e.calendarPlugins,navLinks:!0,"week-numbers":"true","event-limit":"true","now-indicator":"true","event-render":e.mostrarTooltip,now:e.fechaActual},on:{dateClick:e.handleDateClick,eventClick:e.infoEvento}}),e._v(" "),s("vs-popup",{attrs:{fullscreen:"",classContent:"popup-example",title:"OT"==e.opcion?"Información orden de trabajo ":"Información de novedad",active:e.abrirPoput},on:{"update:active":function(t){e.abrirPoput=t}}},["OT"==e.opcion?s("div",[s("ordenes-gestion-view",{ref:"componente_gestionar_orden",attrs:{"id-reserva":e.idReserva}})],1):s("div",[s("ver-novedad",{ref:"componente_novedad",attrs:{buscarReserva:e.buscar,"id-novedad":e.idNovedad}})],1)])],1)}),[],!1,null,null,null));t.a=f.exports},Az4B:function(e,t,s){"use strict";s.r(t);var a=s("9Fh8"),n=null,i={name:"agenda",components:{FullCalendar:a.a},data:function(){return{datos:[],datosOriginal:[],idGestor:null,leyendas:[],leyendasSeleccionadas:[],esGestor:!0,listaGestores:[],listaLeyendas:[],selectGestores:[]}},created:function(){this.esGestor=this.isRole("gestor"),this.idGestor=this.$route.query.idGestor,this.esGestor||null!=this.idGestor?this.listarEventosAgendaGestor():this.listarEventosAgenda()},mounted:function(){n=this,null!=this.idGestor&&($(".vx-navbar-wrapper").append().hide(),$(".vx-navbar-wrapper").append().hide())},methods:{listarEventosAgenda:function(){var e=this;axios.post("/gestor/listarEventosAgenda",{idGestor:this.idGestor}).then((function(t){e.datosOriginal=t.data[0],e.leyendas=t.data[1],e.listaGestores=t.data[1],e.listaLeyendas=t.data[2]}))},listarEventosAgendaGestor:function(){var e=this;axios.post("/gestor/listarEventosAgendaGestor",{idGestor:this.idGestor}).then((function(t){e.datosOriginal=t.data[0],e.leyendas=t.data[1],e.datos=t.data[0]}))},filtroEventosAgenda:function(){var e=this;axios.post("/gestor/filtroEventosAgenda",{gestores:this.selectGestores,datos:this.datosOriginal,listaGestores:this.listaGestores}).then((function(t){e.datos=t.data.datos,e.listaLeyendas=t.data.leyendas,e.leyendasSeleccionadas=t.data.selectLeyendas,e.actualizarVista()}))},actualizarVista:function(){var e=[];$.each(n.listaGestores,(function(t,s){e.push(Object.assign({},s))}));var t=[];$.each(n.listaGestores,(function(e,s){-1===$.inArray(s.id,n.selectGestores)?t.push(s):$("."+s.id).show()})),$.each(n.listaLeyendas,(function(e,s){-1===$.inArray(s.id,n.leyendasSeleccionadas)?t.push(s):$("."+s.id).show()})),$.each(t,(function(e,t){$("."+t.id).hide()}))}},watch:{selectGestores:function(e){this.selectGestores.length>0?this.filtroEventosAgenda():this.leyendasSeleccionadas=[]}}},o=s("KHd+"),l=Object(o.a)(i,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("vs-row",[e.esGestor||null!=e.idGestor?s("vs-card",{attrs:{title:"Leyendas"}},[s("vs-row",e._l(e.leyendas,(function(t,a){return s("vs-col",{key:a,staticClass:"mb-2",attrs:{"vs-sm":"12","vs-md":"2","vs-lg":"2"}},[s("div",{staticClass:"h-3 w-3 inline-block rounded-full mr-2",style:"background-color:"+t.color}),e._v(" "),s("span",[e._v(e._s(t.titulo))])])})),1)],1):e._e(),e._v(" "),e.esGestor||null!=e.idGestor?e._e():s("vs-card",{attrs:{title:"Leyendas"}},[s("vs-row",e._l(e.listaGestores,(function(t,a){return s("vs-col",{staticClass:"mb-2",attrs:{"vs-sm":"6","vs-md":"2","vs-lg":"2"}},[s("vs-checkbox",{key:a,attrs:{"vs-value":t.id,color:t.color},on:{input:e.actualizarVista},model:{value:e.selectGestores,callback:function(t){e.selectGestores=t},expression:"selectGestores"}},[e._v(e._s(t.text)+"\n                ")])],1)})),1),e._v(" "),s("vs-row",[s("vs-col",{attrs:{"vs-sm":"12","vs-md":"12","vs-lg":"12"}},[s("hr")])],1),e._v(" "),s("vs-row",e._l(e.listaLeyendas,(function(t,a){return s("vs-col",{staticClass:"mb-2",attrs:{"vs-sm":"6","vs-md":"2","vs-lg":"2"}},[s("vs-checkbox",{key:a,attrs:{"vs-value":t.id,color:t.color},on:{input:e.actualizarVista},model:{value:e.leyendasSeleccionadas,callback:function(t){e.leyendasSeleccionadas=t},expression:"leyendasSeleccionadas"}},[e._v(e._s(t.text)+"\n                ")])],1)})),1)],1),e._v(" "),s("full-calendar",{attrs:{eventos:e.datos},on:{actualizarEventos:e.actualizarVista}})],1)}),[],!1,null,"45c18092",null);t.default=l.exports},HzdN:function(e,t,s){var a=s("ML8f");"string"==typeof a&&(a=[[e.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(a,n);a.locals&&(e.exports=a.locals)},ML8f:function(e,t,s){(t=e.exports=s("I1BE")(!1)).i(s("x2Gp"),""),t.i(s("9nTw"),""),t.i(s("dWpx"),""),t.i(s("nQO4"),""),t.push([e.i,"",""])},ctrV:function(e,t,s){"use strict";var a=s("HzdN");s.n(a).a}}]);