(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"A+aj":function(e,t,a){"use strict";a.r(t);var n=a("gBkH"),s={name:"cargue_automatico",components:{FileUpload:a.n(n).a},data:function(){return{cliente:null,listaCliente:[],files:[],mensaje:{mensaje:"",datos:[]},fecha_manual:!0,fecha_inicio:"",fecha_fin:""}},created:function(){this.listarClientes()},methods:{listarClientes:function(){var e=this;axios.post("/reservas/listaClientes").then((function(t){e.listaCliente=t.data}))},subirReservas:function(){var e=this;this.loading=!0;var t=new FormData;t.append("archivo_excel",this.files[0].file),t.append("cliente",this.cliente),t.append("fechaManual",this.fecha_manual?1:0),t.append("fechaInicio",this.fecha_inicio),t.append("fechaFinal",this.fecha_fin),this.$refs.upload.active=!1,axios.post("/import-os",t,{headers:{"content-type":"multipart/form-data"}}).then((function(t){"ok"==t.data.mensaje?(e.$swal("Las reservas se han subido con exito."),e.reset()):(e.mensaje.mensaje=t.data.mensaje,e.mensaje.datos=t.data.data),e.loading=!1}))},inputFilter:function(e,t,a){if(e&&!t){if(!/\.(xls|xlsx)$/i.test(e.name))return this.mensaje.mensaje="extensión incorrecta, vuelva a intentar de nuevo.",a();this.mensaje.mensaje="",e.blob="";var n=window.URL||window.webkitURL;n&&n.createObjectURL&&(e.blob=n.createObjectURL(e.file))}e&&t&&(e.version||(e.version=0),e.version++)},descargarArchivoBase:function(){var e=this;axios({method:"get",url:"/ARCHIVO_BASE.xls",responseType:"arraybuffer"}).then((function(t){e.forceFileDownload(t)})).catch((function(){return console.log("error occured")}))},forceFileDownload:function(e){var t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download","ARCHIVO_BASE.xls"),document.body.appendChild(a),a.click()},reset:function(){location.reload()}}},r=(a("yPAW"),a("KHd+")),i=Object(r.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"page-user-list"}},[a("vs-row",{attrs:{"vs-justify":"center"}},[a("vs-col",{attrs:{type:"flex","vs-justify":"center","vs-align":"center","vs-w":"6"}},[a("vx-card",{ref:"filterCard",staticClass:"user-list-filters col-xl-8 col-11 d-flex justify-content-center",attrs:{title:"Cargue automático de reservas"}},[a("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(t){var n=t.handleSubmit;return[a("form",{on:{submit:function(t){return t.preventDefault(),n(e.subirReservas)}}},[a("vs-row",{attrs:{"vs-type":"flex","vs-justify":"flex-end"}},e._l(1,(function(t,n){return a("vs-col",{key:n,attrs:{"vs-type":"flex","vs-justify":"center","vs-align":"center","vs-w":"4"}},[a("a",{attrs:{href:"/reservas/descargarArchivoReserva",target:"_blank"}},[a("vs-button",{attrs:{color:"dark",type:"line","icon-pack":"material-icons",icon:"get_app","icon-after":""}},[e._v("Descargar plantilla\n                                    ")])],1)])})),1),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-12/12 sm:w-12/12 w-full"},[a("validation-provider",{attrs:{name:"Cliente",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("strong",[e._v("Cliente")]),e._v(" "),a("Select2",{staticClass:"vx-col md:w-12/12 sm:w-12/12 w-full",attrs:{options:e.listaCliente},model:{value:e.cliente,callback:function(t){e.cliente=t},expression:"cliente"}}),e._v(" "),a("span",{staticClass:"text-danger"},[e._v(e._s(n[0]))])]}}],null,!0)})],1),e._v(" "),a("div",{staticClass:"vx-col md:w-12/12 sm:w-12/12 w-full form-group p-6"},[a("strong",[e._v("Vencimiento ?")]),e._v(" "),a("vs-switch",{attrs:{color:"dark","icon-pack":"feather","vs-icon-on":"icon-check-circle","vs-icon-off":"icon-slash"},model:{value:e.fecha_manual,callback:function(t){e.fecha_manual=t},expression:"fecha_manual"}},[a("span",{attrs:{slot:"on"},slot:"on"},[e._v("SI")]),e._v(" "),a("span",{attrs:{slot:"off"},slot:"off"},[e._v("NO")])]),e._v(" "),e.fecha_manual?e._e():a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-6/12 lg:w-6/12 sm:w-12/12"},[a("strong",[e._v("Fecha de inicio")]),e._v(" "),a("validation-provider",{attrs:{name:"Fecha Inicio",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("datetime",{attrs:{type:"date","input-class":"vs-inputx vs-input--input normal","value-zone":"America/Bogota",zone:"America/Bogota",format:"yyyy-MM-dd",auto:""},model:{value:e.fecha_inicio,callback:function(t){e.fecha_inicio=t},expression:"fecha_inicio"}}),e._v(" "),a("span",{staticClass:"text-danger"},[e._v(e._s(n[0]))])]}}],null,!0)})],1),e._v(" "),a("div",{staticClass:"vx-col md:w-6/12 lg:w-6/12 sm:w-12/12"},[a("strong",[e._v("Fecha fin")]),e._v(" "),a("validation-provider",{attrs:{name:"Fecha Inicio",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("datetime",{attrs:{type:"date","input-class":"vs-inputx vs-input--input normal","value-zone":"America/Bogota",zone:"America/Bogota",format:"yyyy-MM-dd",auto:""},model:{value:e.fecha_fin,callback:function(t){e.fecha_fin=t},expression:"fecha_fin"}}),e._v(" "),a("span",{staticClass:"text-danger"},[e._v(e._s(n[0]))])]}}],null,!0)})],1)])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-12/12 sm:w-12/12 w-full text-center"},[a("div",{staticClass:"example-drag"},[a("div",{staticClass:"upload"},[e.files.length?a("ul",e._l(e.files,(function(t,n){return a("li",{key:t.id},[a("span",[e._v(e._s(t.name))]),e._v(" -\n                                                "),a("span",[e._v(e._s(e._f("formatSize")(t.size)))]),e._v(" -\n                                                "),t.error?a("span",[e._v(e._s(t.error))]):t.success?a("span",[e._v("success")]):t.active?a("span",[e._v("active")]):a("span")])})),0):a("ul",[a("div",{staticClass:"text-center p-5"},[a("h4",[e._v("Arrastre el archivo a esta zona"),a("br"),e._v(" o")])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.$refs.upload&&e.$refs.upload.dropActive,expression:"$refs.upload && $refs.upload.dropActive"}],staticClass:"drop-active"},[a("h3",[e._v("Drop files to upload")])]),e._v(" "),a("div",{staticClass:"example-btn"},[a("validation-provider",{attrs:{name:"Archivo Reservas",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("file-upload",{ref:"upload",staticClass:"vs-component vs-button vs-button-success vs-button-filled",attrs:{multiple:!1,drop:!0,"drop-directory":!1,extensions:"xls,xlsx",extensions:["xls","xlsx"]},on:{"input-filter":e.inputFilter},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}},[a("i",{staticClass:"fa fa-plus"}),e._v("\n                                                    Seleccione el archivo de reservas\n                                                ")]),e._v(" "),a("div",{staticClass:"text-danger"},[e._v(e._s(n[0]))])]}}],null,!0)})],1)])])]),e._v(" "),a("div",{staticClass:"vx-col md:w-12/12 sm:w-12/12 w-full text-center form-group p-4"},[a("boton",{attrs:{texto_cargando:"Guardando...",type:"submit",texto:"Guardar reservas",cargando:e.loading},on:{click:e.subirReservas}})],1),e._v(" "),""!=e.mensaje.mensaje?a("div",{staticClass:"vx-col md:w-12/12 sm:w-12/12 w-full text-center"},[a("vs-alert",{attrs:{active:e.mensaje.mensaje,color:"danger","icon-pack":"feather",icon:"icon-info"}},[a("span",[e._v(e._s(e.mensaje.mensaje))])]),e._v(" "),a("vs-list",e._l(e.mensaje.datos,(function(e){return a("vs-list-item",{key:e.nroOrden,attrs:{title:e.nroOrden||e}})})),1)],1):e._e()])],1)]}}])})],1)],1)],1)],1)}),[],!1,null,null,null);t.default=i.exports},R8Ks:function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,"[dir] .example-drag label.btn {\n  margin-bottom: 0;\n}[dir=ltr] .example-drag label.btn {\n  margin-right: 1rem;\n}[dir=rtl] .example-drag label.btn {\n  margin-left: 1rem;\n}\n.example-drag .drop-active {\n  top: 0;\n  bottom: 0;\n  position: fixed;\n  z-index: 9999;\n  opacity: .6;\n}\n[dir] .example-drag .drop-active {\n  text-align: center;\n  background: #000;\n}\n[dir=ltr] .example-drag .drop-active {\n  right: 0;\n  left: 0;\n}\n[dir=rtl] .example-drag .drop-active {\n  left: 0;\n  right: 0;\n}\n.example-drag .drop-active h3 {\n  position: absolute;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  -ms-transform: translateY(-50%);\n  font-size: 40px;\n  color: #fff;\n}\n[dir] .example-drag .drop-active h3 {\n  margin: -.5em 0 0;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n  padding: 0;\n}\n[dir=ltr] .example-drag .drop-active h3 {\n  left: 0;\n  right: 0;\n}\n[dir=rtl] .example-drag .drop-active h3 {\n  right: 0;\n  left: 0;\n}\n",""])},but9:function(e,t,a){var n=a("R8Ks");"string"==typeof n&&(n=[[e.i,n,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(n,s);n.locals&&(e.exports=n.locals)},yPAW:function(e,t,a){"use strict";var n=a("but9");a.n(n).a}}]);