(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{bDny:function(e,t,i){var a;"undefined"!=typeof self&&self,a=function(){return function(e){var t={};function i(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=i(1),n=(a=r)&&a.__esModule?a:{default:a};"undefined"!=typeof window&&window.Vue&&window.Vue.use({install:function(e){e.component("vue-friendly-iframe",n.default)}}),t.default={install:function(e){e.component("vue-friendly-iframe",n.default)},VueFriendlyIframe:n.default},e.exports=t.default},function(e,t,i){var a=i(2)(i(3),i(9),null,null);e.exports=a.exports},function(e,t){e.exports=function(e,t,i,a){var r,n=e=e||{},s=typeof e.default;"object"!==s&&"function"!==s||(r=e,n=e.default);var o="function"==typeof n?n.options:n;if(t&&(o.render=t.render,o.staticRenderFns=t.staticRenderFns),i&&(o._scopeId=i),a){var l=Object.create(o.computed||null);Object.keys(a).forEach((function(e){var t=a[e];l[e]=function(){return t}})),o.computed=l}return{esModule:r,exports:n,options:o}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(i(4)),r=n(i(8));function n(e){return e&&e.__esModule?e:{default:e}}function s(){return(0,a.default)()}t.default={name:"friendly-iframe",props:{src:{type:String,required:!0},crossorigin:{type:String,required:!1,default:"anonymous"},target:{type:String,required:!1,default:"_parent"},className:{type:String,required:!1},allow:{type:String,required:!1},name:{type:String,required:!1}},data:function(){return{iframeEl:null,iframeLoadedMessage:"IFRAME_LOADED_"+s(),iframeOnReadyStateChangeMessage:"IFRAME_ON_READ_STATE_CHANGE_"+s()}},computed:{},watch:{src:function(){this.reinitIframe(this)}},methods:{removeIframe:function(){for(;this.$el.firstChild;)this.$el.removeChild(this.$el.firstChild)},setIframeUrl:function(){var e=this.iframeEl.contentWindow.document;e.open().write("\n          <body onload=\"window.location.replace('"+this.src+"'); parent.postMessage('"+this.iframeLoadedMessage+"', '*')\"></body>\n          <script>\n            window.document.onreadystatechange = function () {\n              if (window.document.readyState === 'complete') {\n                parent.postMessage('"+this.iframeOnReadyStateChangeMessage+"', '*')\n              }\n            };\n          <\/script>\n          "),e.close()},reinitIframe:r.default.debounce((function(e){e.removeIframe(),e.initIframe()}),200),initIframe:function(){this.iframeEl=document.createElement("iframe"),this.iframeEl.setAttribute("style","visibility: hidden; position: absolute; top: -99999px; border: none;"),this.src&&this.iframeEl.setAttribute("iframe-src",this.src),this.className&&this.iframeEl.setAttribute("class",this.className),this.class&&this.iframeEl.setAttribute("class",this.class),this.crossorigin&&this.iframeEl.setAttribute("crossorigin",this.crossorigin),this.target&&this.iframeEl.setAttribute("target",this.target),this.allow&&this.iframeEl.setAttribute("allow",this.allow),this.name&&this.iframeEl.setAttribute("name",this.name),this.$el.appendChild(this.iframeEl),this.setIframeUrl()},listenForEvents:function(){var e=this,t=window.addEventListener?"addEventListener":"attachEvent";(0,window[t])("attachEvent"===t?"onmessage":"message",(function(t){t.data===e.iframeLoadedMessage&&(e.$emit("iframe-load"),e.iframeEl.setAttribute("style","visibility: visible; border: none;")),t.data===e.iframeOnReadyStateChangeMessage&&e.$emit("load")}),!1)}},mounted:function(){this.listenForEvents(),this.initIframe()}},e.exports=t.default},function(e,t,i){var a=i(5),r=i(7),n=a(),s=[1|n[0],n[1],n[2],n[3],n[4],n[5]],o=16383&(n[6]<<8|n[7]),l=0,d=0;e.exports=function(e,t,i){var a=t&&i||0,n=t||[],c=void 0!==(e=e||{}).clockseq?e.clockseq:o,u=void 0!==e.msecs?e.msecs:(new Date).getTime(),f=void 0!==e.nsecs?e.nsecs:d+1,p=u-l+(f-d)/1e4;if(p<0&&void 0===e.clockseq&&(c=c+1&16383),(p<0||u>l)&&void 0===e.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");l=u,d=f,o=c;var v=(1e4*(268435455&(u+=122192928e5))+f)%4294967296;n[a++]=v>>>24&255,n[a++]=v>>>16&255,n[a++]=v>>>8&255,n[a++]=255&v;var m=u/4294967296*1e4&268435455;n[a++]=m>>>8&255,n[a++]=255&m,n[a++]=m>>>24&15|16,n[a++]=m>>>16&255,n[a++]=c>>>8|128,n[a++]=255&c;for(var g=e.node||s,h=0;h<6;++h)n[a+h]=g[h];return t||r(n)}},function(e,t,i){(function(t){var i,a=t.crypto||t.msCrypto;if(a&&a.getRandomValues){var r=new Uint8Array(16);i=function(){return a.getRandomValues(r),r}}if(!i){var n=new Array(16);i=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}e.exports=i}).call(t,i(6))},function(e,t){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t){for(var i=[],a=0;a<256;++a)i[a]=(a+256).toString(16).substr(1);e.exports=function(e,t){var a=t||0,r=i;return r[e[a++]]+r[e[a++]]+r[e[a++]]+r[e[a++]]+"-"+r[e[a++]]+r[e[a++]]+"-"+r[e[a++]]+r[e[a++]]+"-"+r[e[a++]]+r[e[a++]]+"-"+r[e[a++]]+r[e[a++]]+r[e[a++]]+r[e[a++]]+r[e[a++]]+r[e[a++]]}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debounce:function(e,t,i){var a=void 0;return function(){var r=this,n=arguments,s=function(){a=null,i||e.apply(r,n)},o=i&&!a;clearTimeout(a),a=setTimeout(s,t),o&&e.apply(r,n)}}},e.exports=t.default},function(e,t){e.exports={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"vue-friendly-iframe"})},staticRenderFns:[]}}])},e.exports=a()},"jt/V":function(e,t,i){"use strict";i.r(t);var a=i("QBvj"),r={name:"actualizarEstadoOT",data:function(){return{revisado:!1,idReserva:null}},mounted:function(){this.vm=this,this.idReserva=this.params.data.idReserva},methods:{guardarOrdenValidada:function(e,t){var i=this;this.$swal.fire({title:"Validar O.T?",text:"Está seguro que desea guardar los cambios ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, guardar!"}).then((function(a){if(a.value){(void 0).activeLoading=!0;axios.post("/gestor/guardarOrdenRealizada",{idReserva:e,idOT:t,estadoOT:17,estadoReserva:14}).then((function(e){i.activeLoading=!1,i.mostrarNotificacion("Registro exitoso","La orden de trabajo a cambiado al estado de REALIZADA","success"),i.$parent.$parent.consultarOtRevision()}))}}))},abrir:function(e){this.$parent.$parent.actualizarPoput(!0,e)}},watch:{abrirPoput:function(e){1==e&&this.$refs.componente_ver_ot.obtenerreservaId(this.idReserva)}}},n=i("KHd+"),s=Object(n.a)(r,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("vs-row",{attrs:{"vs-align":"flex-end","vs-type":"flex","vs-justify":"end","vs-w":"12"}},[i("vs-col",{attrs:{"vs-type":"flex","vs-justify":"center","vs-align":"center","vs-w":"12"}},[i("a",{on:{click:function(t){return t.preventDefault(),e.abrir(e.params.data.idReserva)}}},[i("i",{staticClass:"material-icons"},[e._v("search")])])])],1)}),[],!1,null,"7c378a42",null).exports,o=i("QvIH"),l=i("Snq/"),d=i.n(l),c={name:"listOtRev",components:{AgGridVue:a.AgGridVue,ActualizarEstadoOT:s,OrdenesGestionView:o.a,vSelect:d.a},data:function(){return{datos:[],searchQuery:"",abrirPoput:!1,idReserva:null,gestor:null,listaGestores:[],tipoActividad:null,listaTipoActividad:[],gridApi:null,gridOptions:{},defaultColDef:{sortable:!0,resizable:!0,suppressMenu:!0},columnDefs:[{headerName:"ID",field:"idOT",width:90},{headerName:"No. Orden",field:"nroorden"},{headerName:"Actividad",field:"actividad"},{headerName:"Tipo actividad",field:"tipoactividad"},{headerName:"Gestor",field:"Gestor"},{headerName:"Fecha actividad",field:"fechaActividad"},{headerName:"Fecha fin actividad",field:"fechaFinActividad"},{headerName:"Ver",fiel:"gestionar",pinned:"right",width:100,cellClass:"text-center",cellRendererFramework:"ActualizarEstadoOT"}],components:{ActualizarEstadoOT:s}}},computed:{usersData:function(){return this.datos},paginationPageSize:function(){return this.gridApi?this.gridApi.paginationGetPageSize():10},totalPages:function(){return this.gridApi?this.gridApi.paginationGetTotalPages():0},currentPage:{get:function(){return this.gridApi?this.gridApi.paginationGetCurrentPage()+1:1},set:function(e){this.gridApi.paginationGoToPage(e-1)}}},mounted:function(){if(this.gridApi=this.gridOptions.api,this.$vs.rtl){var e=this.$refs.agGridTable.$el.querySelector(".ag-header-container");e.style.left="-"+String(Number(e.style.transform.slice(11,-3))+9)+"px"}this.consultarOtRevision()},methods:{updateSearchQuery:function(e){this.gridApi.setQuickFilter(e)},consultarOtRevision:function(){var e=this;this.cargandoGeneral=!0,axios.post("/procesos/novedad.listarOtRev").then((function(t){e.datos=t.data.datos,e.listaGestores=t.data.filtroGestores,e.listaTipoActividad=t.data.filtroTipoActividad,e.cargandoGeneral=!1}))},actualizarPoput:function(e,t){this.abrirPoput=e,this.idReserva=t},setColumnFilter:function(e,t){var i=null;"all"!==t&&(i={type:"equals",filter:t}),this.gridApi.getFilterInstance(e).setModel(i),this.gridApi.onFilterChanged()}},watch:{gestor:function(e){this.setColumnFilter("Gestor",e.value)},tipoActividad:function(e){this.setColumnFilter("tipoactividad",e.value)}}},u=Object(n.a)(c,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"page-user-list"}},[i("vs-popup",{attrs:{fullscreen:"",classContent:"popup-example",title:"Información orden de trabajo ",active:e.abrirPoput},on:{"update:active":function(t){e.abrirPoput=t}}},[i("ordenes-gestion-view",{ref:"componente_ver_ot",attrs:{"id-reserva":e.idReserva},on:{changePoput:e.actualizarPoput}})],1),e._v(" "),i("div",{staticClass:"vx-card p-6"},[i("div",{staticClass:"vx-row"},[i("div",{staticClass:"vx-col ms:w-12/12 md:w-6/12 lg:w-6/12 w-full"},[i("label",{staticClass:"text-sm opacity-75"},[e._v("Gestor")]),e._v(" "),i("v-select",{attrs:{options:e.listaGestores,clearable:!1,dir:e.$vs.rtl?"rtl":"ltr"},model:{value:e.gestor,callback:function(t){e.gestor=t},expression:"gestor"}})],1),e._v(" "),i("div",{staticClass:"vx-col ms:w-12/12 md:w-6/12 lg:w-6/12 w-full"},[i("label",{staticClass:"text-sm opacity-75"},[e._v("Tipo de actividad")]),e._v(" "),i("v-select",{staticClass:"mb-4 sm:mb-0",attrs:{options:e.listaTipoActividad,clearable:!1,dir:e.$vs.rtl?"rtl":"ltr"},model:{value:e.tipoActividad,callback:function(t){e.tipoActividad=t},expression:"tipoActividad"}})],1)]),e._v(" "),i("div",{staticClass:"flex flex-wrap items-center"},[i("div",{staticClass:"flex-grow"},[i("vs-dropdown",{staticClass:"cursor-pointer",attrs:{"vs-trigger-click":""}},[i("div",{staticClass:"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium"},[i("span",{staticClass:"mr-2"},[e._v(e._s(e.currentPage*e.paginationPageSize-(e.paginationPageSize-1))+" - "+e._s(e.usersData.length-e.currentPage*e.paginationPageSize>0?e.currentPage*e.paginationPageSize:e.usersData.length)+" of "+e._s(e.usersData.length))]),e._v(" "),i("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),e._v(" "),i("vs-dropdown-menu",[i("vs-dropdown-item",{on:{click:function(t){return e.gridApi.paginationSetPageSize(10)}}},[i("span",[e._v("10")])]),e._v(" "),i("vs-dropdown-item",{on:{click:function(t){return e.gridApi.paginationSetPageSize(20)}}},[i("span",[e._v("20")])]),e._v(" "),i("vs-dropdown-item",{on:{click:function(t){return e.gridApi.paginationSetPageSize(25)}}},[i("span",[e._v("25")])]),e._v(" "),i("vs-dropdown-item",{on:{click:function(t){return e.gridApi.paginationSetPageSize(30)}}},[i("span",[e._v("30")])])],1)],1)],1),e._v(" "),i("vs-input",{staticClass:"sm:mr-4 mr-0 sm:w-auto w-full sm:order-normal order-3 sm:mt-0 mt-4",attrs:{placeholder:"Search..."},on:{input:e.updateSearchQuery},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}})],1),e._v(" "),i("ag-grid-vue",{ref:"agGridTable",staticClass:"ag-theme-material w-100 my-4 ag-grid-table",staticStyle:{width:"100%",height:"400px"},attrs:{components:e.components,gridOptions:e.gridOptions,columnDefs:e.columnDefs,defaultColDef:e.defaultColDef,rowData:e.datos,rowSelection:"multiple",colResizeDefault:"shift",animateRows:!0,floatingFilter:!1,pagination:!0,paginationPageSize:e.paginationPageSize,suppressPaginationPanel:!0,enableRtl:e.$vs.rtl}}),e._v(" "),i("vs-pagination",{attrs:{total:e.totalPages,max:7},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)}),[],!1,null,"61000a57",null);t.default=u.exports}}]);