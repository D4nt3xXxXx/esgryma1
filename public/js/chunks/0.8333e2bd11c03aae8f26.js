(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"9zq8":function(t,a,e){"use strict";var s=e("hbBj");e.n(s).a},QvIH:function(t,a,e){"use strict";var s=e("o0o1"),i=e.n(s),r=e("ExVU"),o={name:"participantes",props:{datos:{required:!0,type:[Object,Array]}},data:function(){return{participante:{idParticipante:null,cadula:null,nombre:null,empresa:null,tipo:null,facturado:0,idOT:null,estado:"Nuevo"}}},methods:{agregarParticiapante:function(){this.datos.push(this.participante)}},watch:{}},n=e("KHd+"),c=Object(n.a)(o,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("vs-card",[e("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(a){var s=a.handleSubmit;return[e("form",{on:{submit:function(a){return a.preventDefault(),s(t.agregarParticiapante)}}},[e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vx-col sm:w-12/12 md:w-3/12 lg:w-3/12 w-full mb-2"},[e("validation-provider",{attrs:{name:"CEDULA",rules:"required|numeric"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[e("vs-input",{staticClass:"w-full",attrs:{label:"Cedúla"},model:{value:t.participante.cedula,callback:function(a){t.$set(t.participante,"cedula",a)},expression:"participante.cedula"}}),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),t._v(" "),e("div",{staticClass:"vx-col sm:w-12/12 md:w-3/12 lg:w-3/12 w-full mb-2"},[e("validation-provider",{attrs:{name:"NOMBRE",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[e("vs-input",{staticClass:"w-full",attrs:{label:"Nombre"},model:{value:t.participante.nombre,callback:function(a){t.$set(t.participante,"nombre",a)},expression:"participante.nombre"}}),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),t._v(" "),e("div",{staticClass:"vx-col sm:w-12/12 md:w-3/12 lg:w-3/12 w-full mb-2"},[e("validation-provider",{attrs:{name:"Empresa",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[e("vs-input",{staticClass:"w-full",attrs:{label:"Empresa"},model:{value:t.participante.empresa,callback:function(a){t.$set(t.participante,"empresa",a)},expression:"participante.empresa"}}),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),t._v(" "),e("div",{staticClass:"vx-col sm:w-12/12 md:w-3/12 lg:w-3/12w-full mb-2"},[e("span",[t._v("Tipo")]),t._v(" "),e("validation-provider",{attrs:{name:"TIPO",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[e("vs-select",{staticClass:"form-control",staticStyle:{width:"100%"},model:{value:t.participante.tipo,callback:function(a){t.$set(t.participante,"tipo",a)},expression:"participante.tipo"}},[e("vs-select-item",{attrs:{value:"",text:"---seleccione---"}}),t._v(" "),e("vs-select-item",{attrs:{value:"ARL",text:"ARL"}}),t._v(" "),e("vs-select-item",{attrs:{value:"COMERCIAL",text:"COMERCIAL"}})],1),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1)]),t._v(" "),e("vs-row",[e("vs-col",{attrs:{"vs-sm":"12","vs-md":"12","vs-lg":"12","vs-align":"flex-start","vs-type":"flex","vs-justify":"center"}},[e("boton",{attrs:{type:"submit",texto:"Agregar",cargando:t.loading,texto_cargando:"Agregando participante"}},[e("i",{staticClass:"material-icons"},[t._v("exposure_plus_1")])])],1)],1)],1)]}}])})],1),t._v(" "),e("vs-card",[e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vs-col sm:w-12/12 md:w-12/12 lg:w-12/12"},[e("vs-table",{attrs:{data:t.datos},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.data;return t._l(s,(function(a,s){return e("vs-tr",{key:s,attrs:{data:a}},[e("vs-td",{attrs:{data:a.idParticipante}},[t._v("\n                                "+t._s(a.idParticipante)+"\n                            ")]),t._v(" "),e("vs-td",{attrs:{data:a.cedula}},[t._v("\n                                "+t._s(a.cedula)+"\n                            ")]),t._v(" "),e("vs-td",{attrs:{data:a.nombre}},[t._v("\n                                "+t._s(a.nombre)+"\n                            ")]),t._v(" "),e("vs-td",{attrs:{data:a.empresa}},[t._v("\n                                "+t._s(a.empresa)+"\n                            ")]),t._v(" "),e("vs-td",{attrs:{data:a.tipo}},["ARL"==a.tipo?e("vs-chip",{attrs:{color:"primary"}},[t._v("\n                                    "+t._s(a.tipo)+"\n                                ")]):e("vs-chip",{attrs:{color:"success"}},[t._v("\n                                    "+t._s(a.tipo)+"\n                                ")])],1),t._v(" "),e("vs-td",{attrs:{data:a.facturado}},[1==a.facturado?e("vs-chip",{attrs:{color:"primary"}},[t._v("\n                                    SI\n                                ")]):e("vs-chip",[t._v("\n                                    NO\n                                ")])],1)],1)}))}}])},[e("template",{slot:"thead"},[e("vs-th",[t._v("ID")]),t._v(" "),e("vs-th",[t._v("Cedúla")]),t._v(" "),e("vs-th",[t._v("Nombre")]),t._v(" "),e("vs-th",[t._v("Empresa")]),t._v(" "),e("vs-th",[t._v("Tipo")]),t._v(" "),e("vs-th",[t._v("Facturado")])],1)],2)],1)])])],1)}),[],!1,null,"110836c0",null).exports,d={name:"bitacora",props:{datos:{required:!0},datosBitacora:{required:!0,type:[Array,Object]},abrirPoput:{required:!0,type:Boolean}},data:function(){return{idOT:null,orden:null,cliente:null,empresa:null,abrirPoputListar:!1,abrirPoputNuevaBitacora:!1,descripcion:null,fecha:""}},methods:{abrirSwal:function(){var t=this;this.$swal.fire({title:"Agregar bitacora",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Guardar",showLoaderOnConfirm:!0,preConfirm:function(a){if(null!=a&&""!=a){var e={nroOrden:t.datos.nroOrden,idOT:t.datos.idOT,idReserva:t.datos.idReserva,Observacion:a};return t.loading=!0,axios.post("/ordenes/guardarBitacora",e).then((function(a){return t.abrirPoputNuevaBitacora=!1,t.observacion=null,t.loading=!1,t.$parent.$parent.$parent.listarBitacoras(),a}))}t.$swal.showValidationMessage("Los sentimos: Debe agregar el motivo!")},allowOutsideClick:function(){return!Swal.isLoading()}}).then((function(a){a.value&&t.mostrarNotificacion("Registro exitoso","Los datos de la bitacora se han registrado con exito!","success")}))},guardarBitacora:function(){var t=this,a={nroOrden:this.datos.nroOrden,idOT:this.datos.idOT,idReserva:this.datos.idReserva,Observacion:this.descripcion};this.loading=!0,axios.post("/ordenes/guardarBitacora",a).then((function(a){t.abrirPoputNuevaBitacora=!1,t.observacion=null,t.loading=!1,t.listarBitacoras(),t.mostrarNotificacion("Registro exitoso","Los datos de la bitacora se han registrado con exito!","success")}))}},watch:{abrirPoput:function(t){if(t){this.abrirPoputListar=!0,this.$emit("abrirBitacoraPoput"),this.listarBitacoras();var a=new Date;this.fecha=a.getDay()+"-"+(a.getMonth()-1)+"-"+a.getFullYear()+" "+a.getHours()+":"+a.getMinutes()}else this.abrirPoputListar=!1,this.$emit("abrirBitacoraPoput")}}},l=Object(n.a)(d,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("vs-card",[e("vs-row",[e("div",{staticClass:"vx-col sm:w-12/12 md:w-6/12 lg:w-6/12 w-full mb-2"},[e("strong",[t._v("Orden de servicio ")]),t._v(t._s(t.datos.nroOrden||"")+"\n            ")]),t._v(" "),e("div",{staticClass:"vx-col sm:w-12/12 md:w-6/12 lg:w-6/12 w-full mb-2"},[e("strong",[t._v("Cliente ")]),t._v(t._s(t.cliente)+"\n            ")]),t._v(" "),e("div",{staticClass:"vx-col sm:w-12/12 md:w-6/12 lg:w-6/12 mb-2"},[e("strong",[t._v("O.T ")]),t._v(t._s(t.datos.idOT||"")+"\n            ")]),t._v(" "),e("div",{staticClass:"vx-col sm:w-12/12 md:w-6/12 lg:w-6/12 mb-2"},[e("strong",[t._v("Empresa ")]),t._v(" "+t._s(t.datos.empresaOrden||"")+"\n            ")]),t._v(" "),e("vs-col",{attrs:{"vs-sm":"12","vs-md":"12","vs-lg":"12","vs-align":"flex-end","vs-type":"flex","vs-justify":"space-between"}},[e("vs-button",{attrs:{color:"primary",type:"filled"},on:{click:t.abrirSwal}},[t._v("\n                    Nueva Bitacora\n                ")])],1)],1)],1),t._v(" "),e("vs-card",[e("vs-table",{attrs:{data:t.datosBitacora},scopedSlots:t._u([{key:"default",fn:function(a){a.data;return t._l(t.datosBitacora,(function(a,s){return e("vs-tr",{key:s,attrs:{data:a}},[e("vs-td",{attrs:{data:a.idBitacora}},[t._v("\n                        "+t._s(a.idBitacora)+"\n                    ")]),t._v(" "),e("vs-td",{attrs:{data:a.Observacion}},[t._v("\n                        "+t._s(a.Observacion)+"\n                    ")]),t._v(" "),e("vs-td",{attrs:{data:a.fechaObs}},[t._v("\n                        "+t._s(a.fechaObs)+"\n                    ")]),t._v(" "),e("vs-td",{attrs:{data:a.nombre}},[t._v("\n                        "+t._s(a.nombre)+"\n                    ")])],1)}))}}])},[e("template",{slot:"thead"},[e("vs-th",[t._v("ID")]),t._v(" "),e("vs-th",[t._v("Motivo")]),t._v(" "),e("vs-th",[t._v("Fecha")]),t._v(" "),e("vs-th",[t._v("Registra")])],1)],2)],1),t._v(" "),e("vs-popup",{attrs:{title:"Inner popup",active:t.abrirPoputNuevaBitacora},on:{"update:active":function(a){t.abrirPoputNuevaBitacora=a}}},[e("ValidationObserver",{ref:"observadorBitacora",attrs:{tag:"form"},on:{submit:function(a){return a.preventDefault(),t.guardarBitacora()}},scopedSlots:t._u([{key:"default",fn:function(a){a.invalid;return[e("vs-row",[e("div",{staticClass:"vx-col sm:w-12/12 md:w-12/12 lg:w-12/12 w-full mb-2"},[e("validation-provider",{attrs:{name:"DESCRIPCION",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[e("vs-input",{staticClass:"w-full",attrs:{label:"Motivo"},model:{value:t.descripcion,callback:function(a){t.descripcion=a},expression:"descripcion"}}),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),t._v(" "),e("div",{staticClass:"vx-col sm:w-12/12 md:w-12/12 lg:w-12/12 w-full mb-2"},[e("boton",{attrs:{type:"submit",texto:"Agregar",cargando:t.loading,texto_cargando:"Agregando bitacora"}})],1)])]}}])})],1)],1)}),[],!1,null,"14809286",null).exports,v={name:"subirDocumento",props:{datosReserva:{type:[Array,Object],required:!0}},data:function(){return{datosDcto:[]}},methods:{obtenerDatos:function(t){this.datosDcto.push(t)},subirDocumento:function(){var t=this,a=this.$refs.archivo.filesx;if(a.length>0){var e=new FormData;a.forEach((function(t){e.append("archivo[]",t)})),$.each(this.datosReserva,(function(t,a){e.append(t,a)})),axios.post("/documentos/guardarDocumento",e).then((function(a){t.$refs.archivo.filesx=[],t.mostrarNotificacion("Subida exitosa","Se ha subido el documento con exito!","success"),t.$emit("actualizarVista")}))}else this.mostrarNotificacion("Sin documento","Debe seleccionar uno o varios documentos!","warning")}}},u=Object(n.a)(v,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ValidationObserver",{ref:"formNovedad",attrs:{tag:"form"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.handleSubmit;return[e("form",{on:{submit:function(a){return a.preventDefault(),s(t.subirDocumento)}}},[e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vx-col sm:w-12/12 md:w-12/12 lg:w-12/12 w-full d-flex flex justify-center"},[e("vs-upload",{ref:"archivo",attrs:{data:t.datosDcto,id:"archivos","show-upload-button":!1,action:"https://jsonplaceholder.typicode.com/po/sdsdsd"}})],1),t._v(" "),e("div",{staticClass:"vx-col sm:w-12/12 md:w-12/12 lg:w-12/12 w-full d-flex flex justify-center justify-content-center"},[e("boton",{attrs:{texto_cargando:"Guardando archivo...",type:"submit",texto:"Guardar archivo",cargando:t.loading}})],1)])])]}}])})}),[],!1,null,"64a3f6c1",null).exports,p=e("bDny"),f=e.n(p);function m(t,a,e,s,i,r,o){try{var n=t[r](o),c=n.value}catch(t){return void e(t)}n.done?a(c):Promise.resolve(c).then(s,i)}var h,_,g={name:"orden_edit",props:{idReserva:{required:!0}},components:{SubirDocumento:u,Participantes:c,Bitacora:l},component:function(t){f.a},data:function(){return{unicareserva:[],orden:{idGestor:null,idReserva:null,idCategoria:null,categoria:null,idActividad:null,fechaActividad:null,fechaFinActividad:null,asesorARL:null,tipoActividad:null,tiempoEjecutar:null,fechaInforme:null,direccion:null,coordDireccion:null,nombreContacto:null,estadoOT:20,observaciones:null,facturada:!1,infrevisado:!1,urlInforme:null,idEstadoOT:4,idSalon:null,idTema:null,tema:null,telefonocontacto:null,idEstadoReserva:null,idOT:null,ciudad:null,encuestaOk:!1,informeOk:!1,idcurso:null},participante:{cedula:null,nombre:null,empresa:null,tipo:null,facturado:0,idOT:null,estado:"Nuevo"},nuevoparticipante:!1,listaHoras:[],nroParticiones:null,listaParticiones:[],listaCategoria:[],listaActividad:[],listaGestores:[],listaSalon:[],listaTipoActividad:[],listaTemas:[],agendaGestor:!1,agendaSalon:!1,abrirBitacora:!1,datosParticipantes:[],listaCiudades:[],datosBitacora:[],datosDocumentos:[],fechaActual:null,urlEncuenta:null,urlInforme:null,abrirPoputDoc:!1,abrirPoputVerDoc:!1,viewArchivo:"",ancho:0}},computed:{validarEncuestaSinInforme:function(){return!this.requiereInforme()}},created:function(){this.fechaActual=r.DateTime.local()},mounted:function(){16==this.orden.idEstadoOT&&$("#page-user-edit .input-switch").each((function(t,a){$(this).prop("disabled",!0)}))},beforeUpdate:function(){this.ancho=this.tamanoVentana()[1]-160},methods:{eventoTodo:function(){this.isRole("gestor")&&($("#page-user-edit .vs-inputx").each((function(t,a){"InformeInput"!=$(this).attr("id")&&$(this).prop("disabled",!0)})),$("#page-user-edit .input-select").each((function(t,a){$(this).prop("disabled",!0)}))),16==this.orden.idEstadoOT&&$("#page-user-edit .input-switch").each((function(t,a){$(this).prop("disabled",!0)})),this.listaCiudades=[{id:"CARTAGENA",text:"CARTAGENA"},{id:"MONTERIA",text:"MONTERIA"}]},remarcaHoras:function(t,a){for(var e=0;e<this.nroParticiones;e++)(this.listaParticiones[e].nroOrden=t)&&(this.listaParticiones[e].horas=a)},particionarReserva:function(){this.listaParticiones=[];for(var t=1;t<=this.nroParticiones;t++)this.listaParticiones.push({nroOrden:this.unicareserva[0].nroOrden+"-"+t,horas:this.unicareserva[0].unidadesOrden/this.nroParticiones})},obtenerreservaId:function(t){var a=this;null!=t&&null!=t&&null!=this.idReserva&&null!=this.idReserva&&(this.listaSalones(),this.obtenerTipoActividad(),this.cargandoGeneral=!0,axios.post("/reservas/listareservaId",{idReserva:this.idReserva||t}).then((function(t){a.unicareserva=t.data[0];for(var e=1;e<=a.unicareserva.unidadesOrdenTotal;e++)a.listaHoras.push({id:e,text:e});a.nroParticiones=a.listaHoras.length>0?a.listaHoras[0].id:0,a.orden.idReserva=a.idReserva,a.orden.tipoActividad=a.unicareserva.tipoActividad,a.orden.idActividad=a.unicareserva.idActividad,a.orden.idGestor=a.unicareserva.idGestor,a.orden.fechaActividad=null!=a.unicareserva.fechaActividad?r.DateTime.fromSQL(a.unicareserva.fechaActividad):null,a.orden.idSalon=a.unicareserva.idSalon,a.orden.observaciones=a.unicareserva.observaciones,a.orden.nombreContacto=a.unicareserva.nombreContacto,a.orden.idEstadoReserva=a.unicareserva.idEstadoReserva,a.orden.idOT=a.unicareserva.idOT,a.orden.fechaInforme=null!=a.unicareserva.fechaInforme?r.DateTime.fromSQL(a.unicareserva.fechaInforme):null,a.orden.observaciones=a.unicareserva.observaciones,a.orden.nombreContacto=a.unicareserva.nombreContacto,a.orden.telefonocontacto=a.unicareserva.telContacto,a.orden.direccion=a.unicareserva.direccion,a.orden.asesorARL=a.unicareserva.asesorARL,a.orden.urlInforme=a.unicareserva.urlInforme,a.orden.ciudad=a.unicareserva.ciudad,a.orden.encuestaOk=a.unicareserva.encuestaOK,a.orden.informeOk=a.unicareserva.informeOK,a.orden.idEstadoOT=a.unicareserva.idEstadoOT||4,a.orden.idcurso=a.unicareserva.idcurso,a.orden.fechaFinActividad=null!=a.unicareserva.fechaFinActividad?r.DateTime.fromSQL(a.unicareserva.fechaFinActividad):null,a.cargandoGeneral=!1,null!=a.orden.idOT&&""!=a.orden.idOT&&(a.consultarDoc(),a.consultarParticipantes(a.orden.idOT),a.listarBitacoras(),13!=a.orden.idEstadoReserva&&14!=a.orden.idEstadoReserva||(a.consultarEncuenta(),a.consultarInforme())),a.eventoTodo()}),(function(t){a.cargandoGeneral=!1})))},consultarDoc:function(){var t=this;axios.post("/documentos/consultarDocumentos",{idReserva:this.orden.idReserva,idOt:this.orden.idOT,idGestor:this.orden.idGestor}).then((function(a){t.datosDocumentos=a.data}))},listarBitacoras:function(){var t=this;axios.post("/ordenes/listarBitacoras",{idOT:this.unicareserva.idOT}).then((function(a){t.datosBitacora=a.data}))},obtenerActividades:function(t){var a=this;axios.post("/ordenes/listaActividades",{idTipoActividad:this.orden.tipoActividad}).then((function(t){a.listaActividad=t.data,a.obtenerDatosActividad()}))},guardarOrden:function(){var t=this;this.$refs.form.validate().then((function(a){if(a){t.orden.idReserva=t.unicareserva.idReserva,t.orden.tiempoEjecutar=t.unicareserva.unidadesOrden;var e=t.validarFechas();null==t.orden.idGestor?t.$vs.notify({title:"Error",text:"Debe escojer minimo un gestor para dejar la orden en gestión.",color:"warning"}):"ok"!=e?t.$vs.notify({title:"Error",text:e,color:"warning"}):t.datosGuardarOrden().then((function(a){"ok"==a?(t.$vs.notify({title:"Registro exitoso",text:"La reserva se encuentra en GESTION!",color:"success"}),location.reload()):t.$vs.notify({title:"Registro fallido",text:a,color:"warning"})}))}}))},programarOt:function(){var t=this;this.orden.idReserva=this.unicareserva.idReserva,this.orden.tiempoEjecutar=this.unicareserva.unidadesOrden,this.datosGuardarOrden().then((function(a){"ok"==a?axios.post("/ordenes/programarOt",{idReserva:t.unicareserva.idReserva,idOt:t.unicareserva.idOT,participantes:t.datosParticipantes}).then((function(a){t.mostrarNotificacion("Datos actualizados","Se ha programado la O.T con exito!","success"),location.reload()})):t.mostrarNotificacion("Error:::",a,"warn")}))},datosGuardarOrden:(h=i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.post("/ordenes/GuardarOrden",{orden:this.orden,participantes:this.datosParticipantes});case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}}),t,this)})),_=function(){var t=this,a=arguments;return new Promise((function(e,s){var i=h.apply(t,a);function r(t){m(i,e,s,r,o,"next",t)}function o(t){m(i,e,s,r,o,"throw",t)}r(void 0)}))},function(){return _.apply(this,arguments)}),obtenerTipoActividad:function(){var t=this;axios.post("/ordenes/tipoActividad").then((function(a){t.listaTipoActividad=a.data}))},obtenerGestores:function(t){var a=this;axios.post("/ordenes/listaGestores",{idActividad:t}).then((function(t){a.listaGestores=t.data}))},listaCategorias:function(t){var a=this;axios.post("/ordenes/listaCategoria",{idCategoria:t}).then((function(t){a.listaCategoria=t.data,a.orden.categoria=a.listaCategoria[0].text,a.orden.idCategoria=a.listaCategoria[0].id})),console.log("listando categorias")},listaSalones:function(){var t=this;axios.post("/ordenes/listaSalon").then((function(a){t.listaSalon=a.data})),console.log("listando salones")},programarOrden:function(){var t=this.validarFechas();null==this.orden.idGestor?this.$vs.notify({title:"Error",text:"Debe escojer un gestor.",color:"warning"}):null==this.orden.fechaActividad||""==this.orden.fechaActividad?this.$vs.notify({title:"Error",text:"Debe escojer una fecha para la actividad.",color:"warning"}):1==this.orden.tipoActividad&&0==this.datosParticipantes.length?this.$vs.notify({title:"Error",text:"Debe agregar por lo menos un participante al la O.T!",color:"warning"}):"ok"!=t?this.mostrarNotificacion("Error",t,"danger"):(this.orden.idEstadoOT=5,this.orden.estadoOT=21,this.programarOt())},getAgendaGestor:function(t){this.agendaGestor=!0,this.agendaSalon=!1},getAgendaSalon:function(t){this.agendaSalon=!0,this.agendaGestor=!1},obtenerDatosActividad:function(){var t=this;if(null!=this.orden.idActividad){this.obtenerGestores(this.orden.idActividad);var a=this.listaActividad.find((function(a){return a.id==t.orden.idActividad})),e=a.idTema,s=a.idCategoria;this.listaCategorias(s),this.obtenerTemas(e)}},obtenerTemas:function(t){var a=this;this.cargandoGeneral=!0,axios.post("/ordenes/listarTema",{idTema:t}).then((function(t){a.listaTemas=t.data,a.orden.idTema=a.listaTemas[0].id,a.orden.tema=a.listaTemas[0].text,a.cargandoGeneral=!1}))},consultarParticipantes:function(t){var a=this;axios.post("/ordenes/listarParticiapantes",{idOt:t}).then((function(t){a.datosParticipantes=t.data}))},agregarParticiapante:function(){var t=this;this.datosParticipantes.findIndex((function(a){return a.cedula==t.participante.cedula}))<0?(this.datosParticipantes.push(Object.assign({},this.participante)),this.participante.cedula=null,this.participante.nombre=null,this.participante.empresa=null,this.participante.tipo=null,this.participante.facturado=0,this.participante.estado="Nuevo"):this.$vs.notify({title:"Participante existente",text:"El participante ya existe, por favor valide la información!",color:"warning"})},eliminarParticipante:function(t){var a=this;"Nuevo"==t.estado?this.datosParticipantes.splice(this.datosParticipantes.findIndex((function(a){return a.cedula==t.cedula})),1):1==t.facturado?this.$vs.notify({title:"Participante facturado",text:"El participante no se puede eliminar porque se encuentra facturado!",color:"warning"}):(this.cargandoGeneral=!0,axios.post("/ordenes/eliminarParticipante",{idParticipante:t.idParticipante}).then((function(e){a.cargandoGeneral=!1,a.datosParticipantes.splice(a.datosParticipantes.findIndex((function(a){return a.cedula==t.cedula})),1)})))},actualizarFacturado:function(t){var a=this;axios.post("/ordenes/actualizarFacturado",t).then((function(t){a.mostrarNotificacion("Registro exitoso","Se ha actualizado el registro con exito!","success")}))},abrirBitacoraPoput:function(){null!=this.unicareserva.idOT&&""!=this.unicareserva.idOT?0==this.abrirBitacora?(this.abrirBitacora=!0,this.$emit("cerrarPoput",!1)):(this.abrirBitacora=!1,this.$emit("cerrarPoput",!0)):this.mostrarNotificacion("Sin OT","Para generar una bitacora debe crear primero la O.T","danger")},validarFechas:function(){new Date;var t="ok";return 5!=this.orden.tipoActividad&&2!=this.orden.tipoActividad||null!=this.orden.fechaActividad&&null!=this.orden.fechaInforme&&this.orden.fechaInforme<this.orden.fechaActividad&&(t="La fecha del informe  no puede ser menor a la fecha de la actividad!"),t},consultarEncuenta:function(){var t=this;axios.post("/consultas/configApp",{atributo:"urlencuesta"}).then((function(a){t.urlEncuenta=a.data[0].valor}))},consultarInforme:function(){var t=this;axios.post("/consultas/configApp",{atributo:"urlforminforme"}).then((function(a){t.urlInforme=a.data[0].valor}))},actualizarEncuesta:function(){var t=this;axios.post("/gestor/actualizarEncuesta",{idReserva:this.idReserva,encuesta:this.orden.encuestaOk}).then((function(a){t.mostrarNotificacion("Actualización exitosa","Los datos se han actualizado con exito!","success")}))},actualizarInforme:function(){var t=this;axios.post("/gestor/actualizarInforme",{idReserva:this.idReserva,informe:this.orden.informeOk}).then((function(a){t.mostrarNotificacion("Actualización exitosa","Los datos se han actualizado con exito!","success")}))},facturarOT:function(){var t=this;axios.post("/gestor/guardarOrdenRealizada",{idReserva:this.orden.idReserva,idOT:this.orden.idOT,estadoOT:8,estadoReserva:15}).then((function(a){t.loading=!1,t.mostrarNotificacion("Registro exitoso","La O.T actual se ha facturado con exito!","success"),location.reload()}))},cancelarOT:function(){var t=this;this.$swal.fire({title:"Cancelar la O.T?",text:"Desea cancelar la orden de trabajo actual ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, cancelar!"}).then((function(a){a.value&&axios.post("/ordenes/cancelarOT",{idOT:t.orden.idOT,idReserva:t.orden.idReserva}).then((function(a){t.mostrarNotificacion("Cancelar O.T","La O.T se ha cancelado con exito!","success"),location.reload()}))}))},requiereInforme:function(){return 5==this.orden.tipoActividad||2==this.orden.tipoActividad},guardarOrdenRealizada:function(t){var a=0,e=0,s="";"otro"==t?this.requiereInforme()?this.requiereInforme()&&1==this.orden.informeOk?(e=7,a=14,s="La orden de trabajo a pasado al estado de REALIZADA PENDIENTE REVISADO"):this.requiereInforme()&&0==this.orden.informeOk?(e=6,a=14,s="La orden de trabajo a pasado al estado de REALIZADA PENDIENTE POR INFORME"):(a=17,e=16,s="La orden de trabajo a cambiado al estado de REALIZADA"):(e=16,a=17,s="La orden de trabajo a pasado al estado de REALIZADA"):(a=17,e=16,s="La orden de trabajo a cambiado al estado de REALIZADA"),this.guardarOrdenValidada(a,e,s)},guardarOrdenValidada:function(t,a,e){var s=this;this.loading=!0,this.datosGuardarOrden().then((function(i){axios.post("/gestor/guardarOrdenRealizada",{idReserva:s.orden.idReserva,idOT:s.orden.idOT,estadoOT:a,estadoReserva:t}).then((function(t){s.loading=!1,s.mostrarNotificacion("Registro exitoso",e,"success"),location.reload()}))}))},verDocumento:function(t){var a=this,e=(t.path,t.nombre,t.ext.trim());this.cargandoGeneral=!0,this.viewArchivo="",this.abrirPoputVerDoc=!0,axios.post("/documentos/verDcto",t).then((function(t){var s=t.data+"&hl=en&pid=explorer&efh=false&a=v&chrome=false&embedded=true";"pdf"!=e&&"PDF"!=e&&"png"!=e&&"PNG"!=e&&"jpg"!=e&&"jpeg"!=e&&"JPG"!=e&&(s="https://view.officeapps.live.com/op/embed.aspx?src=".concat(t.data)),a.cargandoGeneral=!1,a.ancho=a.tamanoVentana()[1]-160,a.viewArchivo=s,a.$nextTick((function(){$(".vue-friendly-iframe").css("height",this.ancho)}))}))},tamanoVentana:function(){return void 0!==window.innerWidth?[window.innerWidth,window.innerHeight]:void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?[document.documentElement.clientWidth,document.documentElement.clientHeight]:[document.getElementsByTagName("body")[0].clientWidth,document.getElementsByTagName("body")[0].clientHeight]},loadArchivo:function(){this.cargandoGeneral=!1},changeVista:function(){this.abrirPoputDoc=!1,this.consultarDoc(),this.$emit("actualizarVistaGestor")},descargarDcto:function(t,a,e){var s=document.createElement("a");s.target="_blank",s.href="/documentos/descargarDcto?path="+t+"&nombre="+a+"&ext="+e,s.click()}},watch:{idReserva:{immediate:!0,handler:function(t,a){null!=this.idReserva&&""!=this.idReserva&&this.obtenerreservaId(t)}},"orden.encuestaOK":{handler:function(t,a){this.actualizarEncuesta()},deep:!0},"orden.informeOK":{handler:function(t,a){this.actualizarInforme()},deep:!0}}},b=(e("9zq8"),Object(n.a)(g,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"page-user-edit"}},[e("vs-popup",{attrs:{classContent:"popup-example poputSecundario",title:"Subir informe",active:t.abrirPoputDoc},on:{"update:active":function(a){t.abrirPoputDoc=a}}},[e("subir-documento",{attrs:{"datos-reserva":t.orden},on:{actualizarVista:t.changeVista}})],1),t._v(" "),e("vs-popup",{attrs:{title:"Previsualización documento",fullscreen:"",active:t.abrirPoputVerDoc},on:{"update:active":function(a){t.abrirPoputVerDoc=a}}},[e("vue-friendly-iframe",{style:{height:t.ancho,width:"100%"},attrs:{src:t.viewArchivo,className:"w-100 iframeArchivo",frameborder:"0",gesture:"media",allow:"encrypted-media"},on:{load:t.loadArchivo}})],1),t._v(" "),e("vs-tabs",[e("vs-tab",{attrs:{label:"O.T"}},[e("div",{staticClass:"con-tab-ejemplo"},[e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vx-col sm:w-3/3 w-full mb-4"},[e("vx-card",{attrs:{title:"Información de la reserva:"}},[e("div",{staticClass:"vx-row mb-4 mt-3"},[e("div",{staticClass:"vx-col sm:w-12/12 md:w-4/12 lg:w-4/12 w-full mb-1"},[e("strong",[t._v("Empresa: ")]),t._v(t._s(t.unicareserva.empresaOrden)+"\n                                ")]),t._v(" "),e("div",{staticClass:"vx-col sm:w-12/12 md:w-4/12 lg:w-4/12 w-full mb-2"},[e("strong",[t._v("Vigencia: ")])]),t._v(" "),e("div",{staticClass:"vx-col sm:w-12/12 md:w-4/12 lg:w-4/12 w-full mb-2"},[e("strong",[t._v("Gestor sugerido: ")]),t._v(t._s(t.unicareserva.gestorSolicitado)+"\n                                ")])]),t._v(" "),e("div",{staticClass:"vx-row mb-4 mt-6"},[e("div",{staticClass:"vx-col sm:w-12/12 md:w-4/12 lg:w-4/12 w-full mb-1"},[e("strong",[t._v("Orden de servicio: ")]),t._v(t._s(t.unicareserva.nroOrden)+"\n                                ")]),t._v(" "),e("div",{staticClass:"vx-col sm:w-12/12 md:w-4/12 lg:w-4/12 w-full mb-2"},[e("strong",[t._v("Tema: ")]),t._v(t._s(t.unicareserva.temaOrden)+"\n                                ")]),t._v(" "),e("div",{staticClass:"vx-col sm:w-12/12 md:w-4/12 lg:w-4/12 w-full mb-2"},[e("strong",[t._v("Unidades: ")]),t._v(t._s(t.unicareserva.unidadesOrden)+" hora(s)\n                                ")])]),t._v(" "),e("div",{staticClass:"vx-row mb-4 mt-6"},[e("div",{staticClass:"vx-col sm:w-12/12 md:w-4/12 lg:w-4/12 w-full mb-1 pt-3 pb-3"},[e("strong",[t._v("Estado: ")]),t._v(t._s(t.unicareserva.nomEstado)+"\n                                ")]),t._v(" "),e("div",{staticClass:"vx-col sm:w-12/12 md:w-4/12 lg:w-4/12 w-full mb-1"},[e("strong",[t._v("Cliente: ")]),t._v(t._s(t.unicareserva.nombreCliente)+"\n                                ")])]),t._v(" "),e("div",{staticClass:"vx-row mb-4 mt-6"},[e("div",{staticClass:"vx-col sm:w-12/12 w-full mb-1 pt-3 pb-3",staticStyle:{border:"2px solid #777"}},[e("strong",[t._v("Observaciones: ")]),t._v(t._s(t.unicareserva.obsOrden)+"\n                                ")])])])],1)]),t._v(" "),e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vx-col sm:w-3/3 w-full mb-2"},[e("vx-card",{attrs:{title:"Información de la O.T"}},[e("ValidationObserver",{ref:"form"},[e("form",{on:{submit:function(a){return a.preventDefault(),t.guardarOrden(a)}}},[e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vx-col sm:w-12/12 md:w-4/12 lg:w-4/12 w-full mb-2"},[e("span",[t._v("Tipo actividad")]),t._v(" "),e("vs-select",{staticClass:"form-control",staticStyle:{width:"100%"},attrs:{autocomplete:""},on:{change:t.obtenerActividades},model:{value:t.orden.tipoActividad,callback:function(a){t.$set(t.orden,"tipoActividad",a)},expression:"orden.tipoActividad"}},[e("vs-select-item",{key:"",attrs:{value:"",text:"---seleccione---"}}),t._v(" "),t._l(t.listaTipoActividad,(function(t,a){return e("vs-select-item",{key:a,attrs:{value:t.id,text:t.text}})}))],2)],1),t._v(" "),e("div",{staticClass:"vx-col sm:w-12/12 md:w-4/12 lg:w-4/12 w-full mb-2"},[e("vs-input",{staticClass:"w-full",attrs:{label:"Categoria","label-placeholder":"Categoria...",disabled:!0},model:{value:t.orden.categoria,callback:function(a){t.$set(t.orden,"categoria",a)},expression:"orden.categoria"}})],1),t._v(" "),e("div",{staticClass:"vx-col sm:w-12/12 md:w-4/12 lg:w-4/12 w-full mb-2"},[e("vs-input",{staticClass:"w-full",attrs:{label:"Tema","label-placeholder":"Tema...",disabled:!0},model:{value:t.orden.tema,callback:function(a){t.$set(t.orden,"tema",a)},expression:"orden.tema"}})],1),t._v(" "),e("div",{staticClass:"vx-col sm:w-12/12 md:w-9/12 lg:w-9/12 w-full mb-2"},[e("span",[t._v("Actividad")]),t._v(" "),e("vs-select",{staticClass:"selectExample",staticStyle:{width:"100%"},attrs:{autocomplete:""},on:{change:function(a){return t.obtenerDatosActividad(a)}},model:{value:t.orden.idActividad,callback:function(a){t.$set(t.orden,"idActividad",a)},expression:"orden.idActividad"}},[e("vs-select-item",{key:"",attrs:{value:"",text:"---seleccione---"}}),t._v(" "),t._l(t.listaActividad,(function(t,a){return e("vs-select-item",{key:a,attrs:{value:t.id,text:t.text}})}))],2)],1),t._v(" "),e("div",{staticClass:"vx-col sm:w-12/12 md:w-3/12 lg:w-3/12 w-full mb-2"},[e("span",[t._v("Ciudad")]),t._v(" "),e("vs-select",{staticClass:"selectExample",staticStyle:{width:"100%"},attrs:{autocomplete:""},model:{value:t.orden.ciudad,callback:function(a){t.$set(t.orden,"ciudad",a)},expression:"orden.ciudad"}},[e("vs-select-item",{key:"",attrs:{value:"",text:"---seleccione---"}}),t._v(" "),t._l(t.listaCiudades,(function(t,a){return e("vs-select-item",{key:a,attrs:{value:t.id,text:t.text}})}))],2)],1)]),t._v(" "),e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vx-col sm:w-12/12 md:w-4/12 lg:w-4/12 w-full mb-2"},[e("validation-provider",{attrs:{name:"nroParticiones",rules:"required|numeric"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[e("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Tiempo de la orden"},model:{value:t.unicareserva.unidadesOrden,callback:function(a){t.$set(t.unicareserva,"unidadesOrden",a)},expression:"unicareserva.unidadesOrden"}}),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}])})],1),t._v(" "),e("div",{staticClass:"vx-col sm:w-12/12 md:w-4/12 lg:w-4/12 w-full mb-2"},[e("vs-row",[e("vs-col",{attrs:{"vs-sm":"11","vs-md":"11","vs-lg":"11"}},[e("span",[t._v("Gestor")]),t._v(" "),e("validation-provider",{attrs:{name:"GESTOR",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[e("vs-select",{staticClass:"selectExample",staticStyle:{width:"100%"},attrs:{autocomplete:""},on:{change:function(a){return t.getAgendaGestor(a)}},model:{value:t.orden.idGestor,callback:function(a){t.$set(t.orden,"idGestor",a)},expression:"orden.idGestor"}},[e("vs-select-item",{key:"",attrs:{value:"",text:"---seleccione---"}}),t._v(" "),t._l(t.listaGestores,(function(t,a){return e("vs-select-item",{key:a,attrs:{value:t.id,text:t.text}})}))],2),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}])})],1),t._v(" "),t.orden.idGestor>0?e("vs-col",{attrs:{"vs-sm":"1","vs-md":"1","vs-lg":"1","vs-align":"flex-end","vs-type":"flex","vs-justify":"space-between"}},[e("a",{staticClass:"text-info",attrs:{target:"_blank",href:"/app/agenda?idGestor="+t.orden.idGestor}},[e("i",{staticClass:"material-icons"},[t._v("event_note")])])]):t._e()],1)],1),t._v(" "),e("div",{staticClass:"vx-col sm:w-12/12 md:w-2/12 lg:w-2/12 w-full mb-2"},[e("span",[t._v("Fecha actividad")]),t._v(" "),e("datetime",{attrs:{type:"datetime","input-class":"vs-inputx vs-input--input normal","value-zone":"America/Bogota",zone:"America/Bogota",format:"yyyy-MM-dd H:m",auto:""},model:{value:t.orden.fechaActividad,callback:function(a){t.$set(t.orden,"fechaActividad",a)},expression:"orden.fechaActividad"}})],1),t._v(" "),e("div",{staticClass:"vx-col sm:w-12/12 md:w-2/12 lg:w-2/12 w-full mb-2"},[e("span",[t._v("Fecha fin actividad")]),t._v(" "),e("datetime",{attrs:{type:"datetime","input-class":"vs-inputx vs-input--input normal","value-zone":"America/Bogota",zone:"America/Bogota",format:"yyyy-MM-dd H:m","min-datetime":t.orden.fechaActividad,auto:""},model:{value:t.orden.fechaFinActividad,callback:function(a){t.$set(t.orden,"fechaFinActividad",a)},expression:"orden.fechaFinActividad"}})],1),t._v(" "),e("div",{staticClass:"vx-col sm:w-12/12 md:w-4/12 lg:w-4/12 w-full mb-2"},[e("vs-row",[e("vs-col",{attrs:{"vs-sm":"11","vs-md":"11","vs-lg":"11"}},[e("span",[t._v("Salones disponibles")]),t._v(" "),e("vs-select",{staticClass:"selectExample",staticStyle:{width:"100%"},attrs:{autocomplete:""},on:{change:function(a){return t.getAgendaSalon(a)}},model:{value:t.orden.idSalon,callback:function(a){t.$set(t.orden,"idSalon",a)},expression:"orden.idSalon"}},[e("vs-select-item",{key:"",attrs:{value:"",text:"---seleccione---"}}),t._v(" "),t._l(t.listaSalon,(function(t,a){return e("vs-select-item",{key:a,attrs:{value:t.id,text:t.text}})}))],2)],1),t._v(" "),t.orden.idGestor>0?e("vs-col",{attrs:{"vs-sm":"1","vs-md":"1","vs-lg":"1","vs-align":"flex-end","vs-type":"flex","vs-justify":"space-between"}},[e("a",{staticClass:"text-info",attrs:{target:"_blank",href:"/app/salones?idSalon="+t.orden.idSalon}},[e("i",{staticClass:"material-icons"},[t._v("event_note")])])]):t._e()],1)],1),t._v(" "),t.requiereInforme?e("div",{staticClass:"vx-col sm:w-1/3 w-full mb-2"},[e("span",[t._v("Fecha informe")]),t._v(" "),e("datetime",{attrs:{"min-datetime":t.orden.fechaActividad,type:"date","input-class":"vs-inputx vs-input--input normal","value-zone":"America/Bogota",zone:"America/Bogota",format:"yyyy-MM-dd",auto:""},model:{value:t.orden.fechaInforme,callback:function(a){t.$set(t.orden,"fechaInforme",a)},expression:"orden.fechaInforme"}})],1):t._e(),t._v(" "),e("div",{staticClass:"vx-col sm:w-1/3 w-full mb-2"},[e("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Observaciones"},model:{value:t.orden.observaciones,callback:function(a){t.$set(t.orden,"observaciones",a)},expression:"orden.observaciones"}})],1)]),t._v(" "),e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vx-col sm:w-1/3 w-full mb-2"},[e("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Nombre contacto"},model:{value:t.orden.nombreContacto,callback:function(a){t.$set(t.orden,"nombreContacto",a)},expression:"orden.nombreContacto"}})],1),t._v(" "),e("div",{staticClass:"vx-col sm:w-12/12 md:w-2/12 lg:w-2/12 w-full mb-2"},[e("validation-provider",{attrs:{name:"TELEFONO CONTACTO",rules:"numeric|max:10"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[e("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Teléfono contacto"},model:{value:t.orden.telefonocontacto,callback:function(a){t.$set(t.orden,"telefonocontacto",a)},expression:"orden.telefonocontacto"}}),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}])})],1),t._v(" "),e("div",{staticClass:"vx-col sm:w-12/12 md:w-6/12 lg:w-6/12 w-full mb-2"},[e("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Dirección"},model:{value:t.orden.direccion,callback:function(a){t.$set(t.orden,"direccion",a)},expression:"orden.direccion"}})],1),t._v(" "),e("div",{staticClass:"vx-col sm:w-1/3 w-full mb-2"},[e("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Asesor ARL"},model:{value:t.orden.asesorARL,callback:function(a){t.$set(t.orden,"asesorARL",a)},expression:"orden.asesorARL"}})],1),t._v(" "),e("div",{staticClass:"vx-col sm:w-1/3 w-full mb-2"},[e("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"ID curso"},model:{value:t.orden.idcurso,callback:function(a){t.$set(t.orden,"idcurso",a)},expression:"orden.idcurso"}})],1),t._v(" "),13==t.orden.idEstadoReserva||14==t.orden.idEstadoReserva?e("div",{staticClass:"vx-col sm:w-12/12 md:w-6/12 lg:w-6/12 w-full mb-4 text-center"},[e("a",{staticClass:"w-full",attrs:{href:t.urlEncuenta,target:"_blank"}},[t._v("\n                                                << Realizar encuesta de satisfacción >>\n                                            ")])]):t._e(),t._v(" "),13==t.orden.idEstadoReserva||14==t.orden.idEstadoReserva?e("div",{staticClass:"vx-col sm:w-12/12 md:w-6/12 lg:w-6/12 w-full mb-4 text-center"},[e("a",{staticClass:"w-full",attrs:{href:"#"},on:{click:function(a){t.abrirPoputDoc=!0}}},[t._v("\n                                                << Subir informe >>\n                                            ")])]):t._e(),t._v(" "),t.datosDocumentos.length>0?e("div",{staticClass:"vx-col sm:w-12/12 md:w-12/12 lg:w-12/12 w-full mb-2"},[e("vs-list",t._l(t.datosDocumentos,(function(a){return e("vs-list-item",{attrs:{title:a.nombre,subtitle:t.diaSemana2(a.created_at)}},[e("span",{staticClass:"material-icons text-info",staticStyle:{cursor:"pointer"},on:{click:function(e){return e.preventDefault(),t.verDocumento(a)}}},[t._v("visibility")]),t._v(" "),e("span",{staticClass:"material-icons text-success",staticStyle:{cursor:"pointer"},on:{click:function(e){return e.preventDefault(),t.descargarDcto(a.path,a.nombre,a.ext)}}},[t._v("cloud_download")])])})),1)],1):t._e()]),t._v(" "),16!=t.orden.idEstadoOT&&17!=t.orden.idEstadoReserva||!t.isRole("admin|asisadministrativo")?t._e():e("vs-row",{attrs:{"vs-type":"flex","vs-justify":"flex-end"}},[17==t.orden.idEstadoReserva?e("vs-col",{attrs:{"vs-sm":"12","vs-md":"3","vs-lg":"3","vs-type":"flex","vs-justify":"center","vs-align":"center"}},[e("strong",[t._v("FACTURADA")]),t._v(" "),e("vs-switch",{attrs:{color:"success"},on:{input:t.facturarOT},model:{value:t.orden.facturada,callback:function(a){t.$set(t.orden,"facturada",a)},expression:"orden.facturada"}},[e("span",{attrs:{slot:"on"},slot:"on"},[t._v("Aceptar")]),t._v(" "),e("span",{attrs:{slot:"off"},slot:"off"},[t._v("NO")])])],1):t._e()],1),t._v(" "),16!=t.orden.idEstadoOT&&8!=t.orden.idEstadoOT&&t.orden.idGestor==t.$store.state.esgryma.id?e("vs-row",{attrs:{"vs-type":"flex","vs-justify":"flex-end"}},[t.canPermiso("ot.infrevisado")?e("vs-col",{attrs:{"vs-sm":"12","vs-md":"3","vs-lg":"3","vs-type":"flex","vs-justify":"center","vs-align":"center"}},[e("strong",[t._v("INF. REVISADO")]),t._v(" "),e("vs-switch",{attrs:{color:"success"},model:{value:t.orden.infrevisado,callback:function(a){t.$set(t.orden,"infrevisado",a)},expression:"orden.infrevisado"}},[e("span",{attrs:{slot:"on"},slot:"on"},[t._v("Aceptar")]),t._v(" "),e("span",{attrs:{slot:"off"},slot:"off"},[t._v("NO")])])],1):t._e(),t._v(" "),t.isRole("admin|gestor")&&14==t.orden.idEstadoReserva?e("vs-col",{attrs:{"vs-sm":"12","vs-md":"4","vs-lg":"4","vs-type":"flex","vs-justify":"center","vs-align":"center"}},[e("strong",[t._v("Encuesta realizada ?")]),t._v(" "),e("vs-switch",{staticClass:"estados",attrs:{color:"success"},on:{input:t.actualizarEncuesta},model:{value:t.orden.encuestaOk,callback:function(a){t.$set(t.orden,"encuestaOk",a)},expression:"orden.encuestaOk"}},[e("span",{attrs:{slot:"on"},slot:"on"},[t._v("SI")]),t._v(" "),e("span",{attrs:{slot:"off"},slot:"off"},[t._v("NO")])])],1):t._e()],1):t._e(),t._v(" "),t.isRole("gestor")||4!=t.orden.idEstadoOT&&5!=t.orden.idEstadoOT&&12!=t.orden.idEstadoOT?t.isRole("admin|gestor|coordprevencion")&&16!=t.orden.idEstadoOT&&8!=t.orden.idEstadoOT?e("div",[t.requiereInforme()&&t.isRole("admin|asisadministrativo")?e("vs-button",{attrs:{color:"success",type:"filled"},on:{click:function(a){return t.programarOrden()}}},[t._v("\n                                            Guardar\n                                        ")]):t._e(),t._v(" "),5!=t.orden.idEstadoOT&&6!=t.orden.idEstadoOT&&7!=t.orden.idEstadoOT||!t.isRole("admin|gestor")?t._e():e("vs-button",{attrs:{gradient:"",loading:t.loading},on:{click:function(a){return t.guardarOrdenRealizada("otro")}}},[t._v("\n                                            Guardar O.T realizada\n                                        ")]),t._v(" "),t.isRole("admin|coordprevencion")&&7==t.orden.idEstadoOT?e("vs-button",{attrs:{color:"danger",type:"gradient",loading:t.loading},on:{click:function(a){return t.guardarOrdenRealizada("revision")}}},[t._v("\n                                            Guardar revisión\n                                        ")]):t._e()],1):t._e():e("div",{staticClass:"vx-row mt-3"},[e("div",{staticClass:"vx-col w-full text-center"},[t._v("\n                                             "),5!=t.orden.idEstadoOT?e("vs-button",{attrs:{loading:t.loading,active:t.loading},on:{click:t.guardarOrden}},[t._v("\n                                            Guardar\n                                        ")]):t._e(),t._v(" "),!t.isRole("admin|asisadministrativo")||4!=t.orden.idEstadoOT&&12!=t.orden.idEstadoOT&&5!=t.orden.idEstadoOT?t._e():e("vs-button",{attrs:{color:"success",type:"filled"},on:{click:function(a){return t.programarOrden()}}},[t._v("\n                                                "+t._s(5==t.orden.idEstadoOT?"Guardar":"Programar O.T")+"\n                                            ")]),t._v(" "),null==t.orden.idOT||!t.isRole("admin|asisadministrativo")||14!=t.orden.idEstadoReserva&&3!=t.orden.idEstadoReserva&&5!=t.orden.idEstadoOT?t._e():e("vs-button",{attrs:{color:"danger",type:"filled"},on:{click:t.cancelarOT}},[t._v("\n                                                Cancelar ot\n                                            ")])],1)])],1)])],1)],1)])])]),t._v(" "),e("vs-tab",{attrs:{label:"Participantes",disabled:1!=t.orden.tipoActividad&&4!=t.orden.tipoActividad||t.isRole("gestor")}},[e("vs-row",{attrs:{"vs-type":"flex","vs-justify":"flex-end"}},[e("vs-col",{attrs:{"vs-sm":"12","vs-md":"12","vs-lg":"12","vs-type":"flex","vs-justify":"end","vs-align":"end","vs-w":"2"}},[e("vs-button",{attrs:{icon:"",color:"success",flat:"",type:"flat"},on:{click:function(a){t.nuevoparticipante=!t.nuevoparticipante}}},[e("i",{staticClass:"material-icons"},[t._v("person_add")])])],1)],1),t._v(" "),e("vs-card",{directives:[{name:"show",rawName:"v-show",value:t.nuevoparticipante,expression:"nuevoparticipante"}]},[e("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(a){var s=a.handleSubmit;return[e("form",{on:{submit:function(a){return a.preventDefault(),s(t.agregarParticiapante)}}},[e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vx-col sm:w-12/12 md:w-3/12 lg:w-3/12 w-full mb-2"},[e("validation-provider",{attrs:{name:"CEDULA",rules:"required|numeric"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[e("vs-input",{staticClass:"w-full",attrs:{label:"Cedúla"},model:{value:t.participante.cedula,callback:function(a){t.$set(t.participante,"cedula",a)},expression:"participante.cedula"}}),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),t._v(" "),e("div",{staticClass:"vx-col sm:w-12/12 md:w-3/12 lg:w-3/12 w-full mb-2"},[e("validation-provider",{attrs:{name:"NOMBRE",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[e("vs-input",{staticClass:"w-full",attrs:{label:"Nombre"},model:{value:t.participante.nombre,callback:function(a){t.$set(t.participante,"nombre",a)},expression:"participante.nombre"}}),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),t._v(" "),e("div",{staticClass:"vx-col sm:w-12/12 md:w-3/12 lg:w-3/12 w-full mb-2"},[e("validation-provider",{attrs:{name:"Empresa",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[e("vs-input",{staticClass:"w-full",attrs:{label:"Empresa"},model:{value:t.participante.empresa,callback:function(a){t.$set(t.participante,"empresa",a)},expression:"participante.empresa"}}),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),t._v(" "),e("div",{staticClass:"vx-col sm:w-12/12 md:w-3/12 lg:w-3/12w-full mb-2"},[e("span",[t._v("Tipo")]),t._v(" "),e("validation-provider",{attrs:{name:"TIPO",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[e("vs-select",{staticClass:"form-control",staticStyle:{width:"100%"},model:{value:t.participante.tipo,callback:function(a){t.$set(t.participante,"tipo",a)},expression:"participante.tipo"}},[e("vs-select-item",{attrs:{value:"",text:"---seleccione---"}}),t._v(" "),e("vs-select-item",{attrs:{value:"ARL",text:"ARL"}}),t._v(" "),e("vs-select-item",{attrs:{value:"COMERCIAL",text:"COMERCIAL"}})],1),t._v(" "),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1)]),t._v(" "),e("vs-row",[e("vs-col",{attrs:{"vs-sm":"12","vs-md":"12","vs-lg":"12","vs-align":"flex-start","vs-type":"flex","vs-justify":"center"}},[e("boton",{attrs:{type:"submit",texto:"Agregar",cargando:t.loading,texto_cargando:"Agregando participante"}},[e("i",{staticClass:"material-icons"},[t._v("exposure_plus_1")])])],1)],1)],1)]}}])})],1),t._v(" "),e("vs-card",[e("vs-table",{attrs:{data:t.datosParticipantes},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.data;return t._l(s,(function(a,s){return e("vs-tr",{key:s,attrs:{data:a}},[e("vs-td",{attrs:{data:a.idParticipante}},[t._v("\n                                "+t._s(a.idParticipante)+"\n                            ")]),t._v(" "),e("vs-td",{attrs:{data:a.cedula}},[t._v("\n                                "+t._s(a.cedula)+"\n                            ")]),t._v(" "),e("vs-td",{attrs:{data:a.nombre}},[t._v("\n                                "+t._s(a.nombre)+"\n                            ")]),t._v(" "),e("vs-td",{attrs:{data:a.empresa}},[t._v("\n                                "+t._s(a.empresa)+"\n                            ")]),t._v(" "),e("vs-td",{attrs:{data:a.tipo}},["ARL"==a.tipo?e("vs-chip",{attrs:{color:"primary"}},[t._v("\n                                    "+t._s(a.tipo)+"\n                                ")]):e("vs-chip",{attrs:{color:"success"}},[t._v("\n                                    "+t._s(a.tipo)+"\n                                ")])],1),t._v(" "),e("vs-td",{attrs:{data:a.facturado}},[e("vs-switch",{on:{input:function(e){return t.actualizarFacturado(a)}},model:{value:a.facturado,callback:function(e){t.$set(a,"facturado",e)},expression:"tr.facturado"}},[e("span",{attrs:{slot:"on"},slot:"on"},[t._v("SI")]),t._v(" "),e("span",{attrs:{slot:"off"},slot:"off"},[t._v("NO")])])],1),t._v(" "),e("vs-td",[0==a.facturado?e("vs-button",{attrs:{color:"danger",type:"gradient",icon:"delete_forever"},on:{click:function(e){return t.eliminarParticipante(a)}}}):t._e()],1)],1)}))}}])},[e("template",{slot:"thead"},[e("vs-th",[t._v("ID")]),t._v(" "),e("vs-th",[t._v("Cedúla")]),t._v(" "),e("vs-th",[t._v("Nombre")]),t._v(" "),e("vs-th",[t._v("Empresa")]),t._v(" "),e("vs-th",[t._v("Tipo")]),t._v(" "),e("vs-th",[t._v("Facturado")]),t._v(" "),e("vs-th")],1)],2)],1)],1),t._v(" "),e("vs-tab",{attrs:{label:"Bitacora",disabled:!t.orden.idOT}},[e("bitacora",{ref:"componetBitacora",attrs:{datosBitacora:t.datosBitacora,datos:t.unicareserva}})],1)],1)],1)}),[],!1,null,null,null));a.a=b.exports},gqYN:function(t,a,e){(t.exports=e("I1BE")(!1)).push([t.i,".iframeArchivo {\n  height: 100% !important;\n  width: 100% !important;\n}\n.poputSecundario {\n  z-index: 53001 !important;\n}\n",""])},hbBj:function(t,a,e){var s=e("gqYN");"string"==typeof s&&(s=[[t.i,s,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};e("aET+")(s,i);s.locals&&(t.exports=s.locals)}}]);