(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{wHHd:function(a,t,s){"use strict";s.r(t);var r={name:"registrar",data:function(){return{data_local:{name:"",email:"",password:"",activo:1,tipo_usuario:""},confirmar_clave:""}},methods:{guardarUsuario:function(){var a=this;axios.post("/maestros/guardarUsuario",this.data_local).then((function(t){"ok"==t.data?(a.mostrarNotificacion("Guardar usuario","Usuario registrado con exito!","success"),a.reset(),a.$parent.$parent.$parent.consultarUsuarios(),a.$parent.$parent.$parent.popupActivo=!1):a.mostrarNotificacion("Usuario existe",t.data,"warning")}))},reset:function(){this.data_local={name:"",email:"",password:"",activo:1,tipo_usuario:""},this.confirmar_clave=""}}},e=s("KHd+"),o={name:"usuarios",data:function(){return{datosUsuario:[],usuarioEliminar:[],popupActivo:!1}},components:{usuarioRegistrar:Object(e.a)(r,(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ValidationObserver",{scopedSlots:a._u([{key:"default",fn:function(t){var r=t.handleSubmit;return[s("form",{on:{submit:function(t){return t.preventDefault(),r(a.guardarUsuario)}}},[s("div",{staticClass:"vx-row"},[s("div",{staticClass:"vx-col sm:w-12/12 md:w-12/12 lg:w-12/12 w-full form-group mb-2"},[s("validation-provider",{attrs:{name:"NOMBRE",rules:"required"},scopedSlots:a._u([{key:"default",fn:function(t){var r=t.errors;return[s("vs-input",{staticClass:"w-full mt-4",attrs:{label:"Nombre completo",name:"nombre"},model:{value:a.data_local.name,callback:function(t){a.$set(a.data_local,"name",t)},expression:"data_local.name"}}),a._v(" "),s("span",{staticClass:"text-danger"},[a._v(a._s(r[0]))])]}}],null,!0)})],1),a._v(" "),s("div",{staticClass:"vx-col sm:w-12/12 md:w-6/12 lg:w-6/12 w-full form-group mb-2"},[s("validation-provider",{attrs:{name:"EMAIL",rules:"required|email"},scopedSlots:a._u([{key:"default",fn:function(t){var r=t.errors;return[s("vs-input",{staticClass:"w-full",attrs:{label:"Correo",type:"email",name:"email"},model:{value:a.data_local.email,callback:function(t){a.$set(a.data_local,"email",t)},expression:"data_local.email"}}),a._v(" "),s("span",{staticClass:"text-danger"},[a._v(a._s(r[0]))])]}}],null,!0)})],1),a._v(" "),s("div",{staticClass:"vx-col sm:w-12/12 md:w-6/12 lg:w-6/12 w-full form-group mb-2"},[s("validation-provider",{attrs:{name:"TIPO USUARIO",rules:"required"},scopedSlots:a._u([{key:"default",fn:function(t){var r=t.errors;return[s("vs-select",{staticStyle:{width:"100%"},attrs:{autocomplete:"",label:"Tipo"},model:{value:a.data_local.tipo_usuario,callback:function(t){a.$set(a.data_local,"tipo_usuario",t)},expression:"data_local.tipo_usuario"}},[s("vs-select-item",{key:"",attrs:{value:"",text:"---seleccione---"}}),a._v(" "),s("vs-select-item",{key:"ESGRYMA",attrs:{value:"ESGRYMA",text:"ESGRYMA"}}),a._v(" "),s("vs-select-item",{key:"CONTRATISTA",attrs:{value:"CONTRATISTA",text:"CONTRATISTA"}})],1),a._v(" "),s("span",{staticClass:"text-danger"},[a._v(a._s(r[0]))])]}}],null,!0)})],1)]),a._v(" "),s("div",{staticClass:"vx-row"},[s("div",{staticClass:"vx-col sm:w-12/12 md:w-6/12 lg:w-6/12 w-full form-group mb-2"},[s("validation-provider",{attrs:{name:"CONTRASEÑA",rules:"required|confirmed:confirmacion|min:8"},scopedSlots:a._u([{key:"default",fn:function(t){var r=t.errors;return[s("vs-input",{ref:"password",staticClass:"w-full mb-base",attrs:{type:"password","icon-after":"true","label-placeholder":"Contraseña",icon:"vpn_key",name:"clave"},model:{value:a.data_local.password,callback:function(t){a.$set(a.data_local,"password",t)},expression:"data_local.password"}}),a._v(" "),s("span",{staticClass:"text-danger"},[a._v(a._s(r[0]))])]}}],null,!0)})],1),a._v(" "),s("div",{staticClass:"vx-col sm:w-12/12 md:w-6/12 lg:w-6/12 w-full form-group mb-2"},[s("validation-provider",{attrs:{name:"REPETIR CONTRASEÑA",rules:"required|min:8",vid:"confirmacion"},scopedSlots:a._u([{key:"default",fn:function(t){var r=t.errors;return[s("vs-input",{staticClass:"w-full mb-base",attrs:{type:"password","icon-after":"true","label-placeholder":"Repetir contraseña",icon:"vpn_key",name:"password"},model:{value:a.confirmar_clave,callback:function(t){a.confirmar_clave=t},expression:"confirmar_clave"}}),a._v(" "),s("span",{staticClass:"text-danger"},[a._v(a._s(r[0]))])]}}],null,!0)})],1)]),a._v(" "),s("div",{staticClass:"vx-row"},[s("div",{staticClass:"vx-col w-full text-center"},[s("boton",{attrs:{texto_cargando:"Guardando usuario...",type:"submit",texto:"Guardar usuario",cargando:a.activeLoading}})],1)])])]}}])})}),[],!1,null,"091aa448",null).exports},created:function(){this.consultarUsuarios()},methods:{consultarUsuarios:function(){var a=this;this.cargandoGeneral=!0,axios.post("/maestros/consultarUsuarios").then((function(t){a.cargandoGeneral=!1,a.datosUsuario=t.data}))},confirmarUsuarioEliminar:function(a){this.usuarioEliminar=a,this.$vs.dialog({type:"confirm",color:"danger",title:"Eliminar usuario",text:'Desea eliminar el usuario  "'.concat(a.nombre,'"'),accept:this.eliminarusuario,acceptText:"Eliminar"})},eliminarusuario:function(){var a=this;axios.post("/maestros/eliminarUsuario",this.usuarioEliminar).then((function(t){"ok"==t.data?a.mostrarNotificacion("Eliminación usuario","El usuario "+a.usuarioEliminar.nombre+", se ha elimnado con exito","success"):a.$swal("Eliminar usuario","Lo sentimos el usuario no se pudo eliminar:"+t.data,"error"),a.consultarUsuarios()}))}}},i=Object(e.a)(o,(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("vx-card",{attrs:{title:"Lista de usuarios"}},[s("vs-button",{attrs:{color:"warning",type:"filled"},on:{click:function(t){a.popupActivo=!0}}},[a._v("\n        Agregar usuario\n    ")]),a._v(" "),s("vs-popup",{staticClass:"holamundo",attrs:{title:"Crear usuario",active:a.popupActivo},on:{"update:active":function(t){a.popupActivo=t}}},[s("usuario-registrar")],1),a._v(" "),s("vs-table",{attrs:{data:this.datosUsuario,pagination:"","max-items":10,search:""},scopedSlots:a._u([{key:"default",fn:function(t){var r=t.data;return a._l(r,(function(t,e){return s("vs-tr",{key:e},[s("vs-td",{attrs:{data:r[e].id}},[a._v("\n                    "+a._s(r[e].id)+"\n                ")]),a._v(" "),s("vs-td",{attrs:{data:r[e].nombre}},[a._v("\n                    "+a._s(r[e].nombre)+"\n                ")]),a._v(" "),s("vs-td",{attrs:{data:r[e].email}},[s("vs-avatar",{staticClass:"flex-shrink-0 mr-2",attrs:{src:r[e].imagen,size:"30px"}}),a._v("\n                    "+a._s(r[e].email)+"\n                ")],1),a._v(" "),s("vs-td",{attrs:{data:r[e].tipo_usuario}},[a._v("\n                    "+a._s(r[e].tipo_usuario)+"\n                ")]),a._v(" "),s("vs-td",{attrs:{data:r[e].rol}},[a._v("\n                    "+a._s(r[e].rol)+"\n                ")]),a._v(" "),s("vs-td",{attrs:{data:r[e].activo}},[s("vs-chip",{staticClass:"ag-grid-cell-chip",attrs:{color:1==r[e].activo?"primary":"danger"}},[s("span",[a._v(a._s(1==r[e].activo?"SI":"NO"))])])],1),a._v(" "),s("vs-td",[s("vs-row",{attrs:{"vs-type":"flex","vs-justify":"flex-end"}},[s("vs-col",{attrs:{"vs-sm":"6","vs-md":"6","vs-lg":"6","vs-type":"flex","vs-justify":"end","vs-align":"end","vs-w":"6"}},[s("vx-tooltip",{attrs:{text:"Editar usuario"}},[s("router-link",{attrs:{to:{name:"maestros.usuariosEdit",query:{idUser:r[e].id}}}},[s("span",{staticClass:"material-icons text-info cursor-pointer"},[a._v("remove_red_eye")])])],1),a._v(" "),"Administrador"!=r[e].rol?s("vx-tooltip",{attrs:{text:"Eliminar usuario"}},[s("span",{staticClass:"material-icons text-danger cursor-pointer",on:{click:function(t){return a.confirmarUsuarioEliminar(r[e])}}},[a._v("delete_forever")])]):a._e()],1)],1)],1)],1)}))}}])},[s("template",{slot:"thead"},[s("vs-th",[a._v("ID")]),a._v(" "),s("vs-th",[a._v("Nombre completo")]),a._v(" "),s("vs-th",[a._v("Correo")]),a._v(" "),s("vs-th",[a._v("Tipo usuario")]),a._v(" "),s("vs-th",[a._v("Rol")]),a._v(" "),s("vs-th",[a._v("Activo")]),a._v(" "),s("vs-th",[a._v("Acciones")])],1)],2)],1)}),[],!1,null,"0e7d5450",null);t.default=i.exports}}]);